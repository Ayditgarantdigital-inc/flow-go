<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bamboo Programming Language</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.css">
  </head>
  <body class="markdown-body">
    <section>
      <h1 id="bamboo-programming-language"><a href="#bamboo-programming-language" aria-hidden="true"><span class="icon icon-link"></span></a>Bamboo Programming Language</h1>
      <section>
        <h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true"><span class="icon icon-link"></span></a>Table of Contents</h2>
        <ul>
          <li>
            <p><a href="#introduction">Introduction</a></p>
          </li>
          <li>
            <p><a href="#syntax-and-behavior">Syntax and Behavior</a></p>
          </li>
          <li>
            <p><a href="#comments">Comments</a></p>
          </li>
          <li>
            <p><a href="#constants-and-variable-declarations">Constants and Variable Declarations</a></p>
          </li>
          <li>
            <p><a href="#type-annotations">Type Annotations</a></p>
          </li>
          <li>
            <p><a href="#naming">Naming</a></p>
            <ul>
              <li><a href="#conventions">Conventions</a></li>
            </ul>
          </li>
          <li>
            <p><a href="#semicolons">Semicolons</a></p>
          </li>
          <li>
            <p><a href="#values-and-types">Values and Types</a></p>
            <ul>
              <li>
                <p><a href="#booleans">Booleans</a></p>
              </li>
              <li>
                <p><a href="#numeric-literals">Numeric Literals</a></p>
              </li>
              <li>
                <p><a href="#integers">Integers</a></p>
              </li>
              <li>
                <p><a href="#floating-point-numbers">Floating-Point Numbers</a></p>
              </li>
              <li>
                <p><a href="#addresses">Addresses</a></p>
              </li>
              <li>
                <p><a href="#any">Any</a></p>
              </li>
              <li>
                <p><a href="#never">Never</a></p>
              </li>
              <li>
                <p><a href="#optionals">Optionals</a></p>
                <ul>
                  <li><a href="#nil-coalescing-operator">Nil-Coalescing Operator</a></li>
                  <li><a href="#conditional-downcasting-operator">Conditional Downcasting Operator</a></li>
                </ul>
              </li>
              <li>
                <p><a href="#strings-and-characters">Strings and Characters</a></p>
              </li>
              <li>
                <p><a href="#arrays">Arrays</a></p>
                <ul>
                  <li><a href="#array-types">Array Types</a></li>
                  <li><a href="#array-indexing">Array Indexing</a></li>
                </ul>
              </li>
              <li>
                <p><a href="#dictionaries">Dictionaries</a></p>
                <ul>
                  <li><a href="#dictionary-types">Dictionary Types</a></li>
                  <li><a href="#dictionary-access">Dictionary Access</a></li>
                  <li><a href="#dictionary-keys">Dictionary Keys</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <p><a href="#operators">Operators</a></p>
            <ul>
              <li><a href="#negation">Negation</a></li>
              <li><a href="#assignment">Assignment</a></li>
              <li><a href="#arithmetic">Arithmetic</a></li>
              <li><a href="#logical-operators">Logical Operators</a></li>
              <li><a href="#comparison-operators">Comparison operators</a></li>
              <li><a href="#ternary-conditional-operator">Ternary Conditional Operator</a></li>
              <li><a href="#precedence-and-associativity">Precedence and Associativity</a></li>
            </ul>
          </li>
          <li>
            <p><a href="#functions">Functions</a></p>
            <ul>
              <li>
                <p><a href="#function-declarations">Function Declarations</a></p>
              </li>
              <li>
                <p><a href="#function-expressions">Function Expressions</a></p>
              </li>
              <li>
                <p><a href="#function-calls">Function Calls</a></p>
              </li>
              <li>
                <p><a href="#function-types">Function Types</a></p>
                <ul>
                  <li><a href="#argument-passing-behavior">Argument Passing Behavior</a></li>
                </ul>
              </li>
              <li>
                <p><a href="#function-preconditions-and-postconditions">Function Preconditions and Postconditions</a></p>
              </li>
            </ul>
          </li>
          <li>
            <p><a href="#control-flow">Control flow</a></p>
            <ul>
              <li><a href="#conditional-branching-if-statement">Conditional branching: if-statement</a></li>
              <li><a href="#looping-while-statement">Looping: while-statement</a></li>
              <li><a href="#immediate-function-return-return-statement">Immediate function return: return-statement</a></li>
            </ul>
          </li>
          <li>
            <p><a href="#scope">Scope</a></p>
          </li>
          <li>
            <p><a href="#type-safety">Type Safety</a></p>
          </li>
          <li>
            <p><a href="#type-inference">Type Inference</a></p>
          </li>
          <li>
            <p><a href="#composite-data-types">Composite Data Types</a></p>
          </li>
          <li>
            <p><a href="#composite-data-type-declaration-and-creation">Composite Data Type Declaration and Creation</a></p>
            <ul>
              <li>
                <p><a href="#composite-data-type-fields">Composite Data Type Fields</a></p>
              </li>
              <li>
                <p><a href="#composite-data-type-field-getters-and-setters">Composite Data Type Field Getters and Setters</a></p>
              </li>
              <li>
                <p><a href="#synthetic-composite-data-type-fields">Synthetic Composite Data Type Fields</a></p>
              </li>
              <li>
                <p><a href="#composite-data-type-functions">Composite Data Type Functions</a></p>
              </li>
              <li>
                <p><a href="#composite-data-type-behaviour">Composite Data Type Behaviour</a></p>
                <ul>
                  <li><a href="#structures">Structures</a></li>
                  <li><a href="#resources">Resources</a></li>
                  <li><a href="#resources-in-arrays-and-dictionaries">Resources in Arrays and Dictionaries</a></li>
                </ul>
              </li>
              <li>
                <p><a href="#unbound-references--nulls">Unbound References / Nulls</a></p>
              </li>
              <li>
                <p><a href="#inheritance-and-abstract-types">Inheritance and Abstract Types</a></p>
              </li>
            </ul>
          </li>
          <li>
            <p><a href="#access-control">Access control</a></p>
          </li>
          <li>
            <p><a href="#interfaces">Interfaces</a></p>
            <ul>
              <li><a href="#interface-declaration">Interface Declaration</a></li>
              <li><a href="#interface-implementation">Interface Implementation</a></li>
              <li><a href="#interface-type">Interface Type</a></li>
              <li><a href="#interface-implementation-requirements">Interface Implementation Requirements</a></li>
              <li><a href="#interface-nesting">Interface Nesting</a></li>
              <li><a href="#nested-type-requirements">Nested Type Requirements</a></li>
              <li><a href="#equatable-interface"><code>Equatable</code> Interface</a></li>
              <li><a href="#hashable-interface"><code>Hashable</code> Interface</a></li>
            </ul>
          </li>
          <li>
            <p><a href="#attestations">Attestations</a></p>
          </li>
          <li>
            <p><a href="#accounts">Accounts</a></p>
          </li>
          <li>
            <p><a href="#account-storage">Account Storage</a></p>
          </li>
          <li>
            <p><a href="#usage-of-external-types">Usage of External Types</a></p>
          </li>
          <li>
            <p><a href="#transactions">Transactions</a></p>
            <ul>
              <li><a href="#deployment">Deployment</a></li>
              <li><a href="#interacting-with-deployed-resources">Interacting with Deployed Resources</a></li>
            </ul>
          </li>
          <li>
            <p><a href="#built-in-functions">Built-in Functions</a></p>
            <ul>
              <li>
                <p><a href="#panic"><code>panic</code></a></p>
                <ul>
                  <li><a href="#example">Example</a></li>
                </ul>
              </li>
              <li>
                <p><a href="#assert"><code>assert</code></a></p>
              </li>
            </ul>
          </li>
          <li>
            <p><a href="#open-questions">Open questions</a></p>
            <ul>
              <li><a href="#shared-mutable-state">Shared Mutable State</a></li>
              <li><a href="#error-handling">Error Handling</a></li>
              <li><a href="#on-chain-storage">On-chain Storage</a></li>
              <li><a href="#fixed-point-numbers-and-arithmetic">Fixed-Point Numbers and Arithmetic</a></li>
              <li><a href="#enums-with-exhaustiveness-check">Enums with Exhaustiveness Check</a></li>
              <li><a href="#switch-case-statement">Switch-Case Statement</a></li>
              <li><a href="#distinctnew-types">Distinct/New Types</a></li>
              <li><a href="#set-data-structure">Set Data Structure</a></li>
              <li><a href="#generics">Generics</a></li>
              <li><a href="#calls-of-pure-functions-in-preconditions-and-postconditions">Calls of Pure Functions in Preconditions and Postconditions</a></li>
              <li><a href="#late-initialization-of-variables-and-constants">Late Initialization of Variables and Constants</a></li>
              <li><a href="#arbitrary-argument-order-based-on-argument-labels">Arbitrary Argument Order Based on Argument Labels</a></li>
            </ul>
          </li>
        </ul>
      </section>
      <section>
        <h2 id="introduction"><a href="#introduction" aria-hidden="true"><span class="icon icon-link"></span></a>Introduction</h2>
        <p>The Bamboo Programming Language is a new high-level programming language intended for smart contract development.</p>
        <p>The language's goals are, in order of importance:</p>
        <ul>
          <li><em>Safety and security</em>: Focus on safety, e.g. by providing a strong static type system, design by contract, and linear types; and security, by providing a capability system, and design by contract.</li>
          <li><em>Auditability</em>: Focus on readability: make it easy to verify what the code is doing, and make intentions explicit, at a small cost of verbosity.</li>
          <li><em>Simplicity</em>: Focus on developer productivity and usability: make it easy to write code, provide good tooling.</li>
        </ul>
      </section>
      <section>
        <h2 id="syntax-and-behavior"><a href="#syntax-and-behavior" aria-hidden="true"><span class="icon icon-link"></span></a>Syntax and Behavior</h2>
        <p>The programming language's syntax and behavior is inspired by Kotlin, Swift, Rust, TypeScript, and Solidity.</p>
      </section>
      <section>
        <h2 id="comments"><a href="#comments" aria-hidden="true"><span class="icon icon-link"></span></a>Comments</h2>
        <p>Comments can be used to document code. A comment is text that is not executed.</p>
        <p><em>Single-line comments</em> start with two slashes (<code>//</code>):</p>
        <pre><code class="language-bamboo,file=single-line-comment.bpl"><span style="color: #008000">// This is a comment on a single line.</span><span>
</span><span style="color: #008000">// Another comment line that is not executed.</span><span>
</span></code></pre>
        <p><em>Multi-line comments</em> start with a slash and an asterisk (<code>/*</code>) and end with an asterisk and a slash (<code>*/</code>):</p>
        <pre><code class="language-bamboo,file=multi-line-comment.bpl"><span style="color: #008000">/* This is a comment which</span><span>
</span><span style="color: #008000">spans multiple lines. */</span><span>
</span></code></pre>
        <p>Comments may be nested.</p>
        <pre><code class="language-bamboo,file=nested-comment.bpl"><span style="color: #008000">/* /* this */ is a valid comment */</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="constants-and-variable-declarations"><a href="#constants-and-variable-declarations" aria-hidden="true"><span class="icon icon-link"></span></a>Constants and Variable Declarations</h2>
        <p>Constants and variables are declarations that bind a value to a name. Constants can only be initialized with a value and cannot be reassigned afterwards. Variables can be initialized with a value and can be reassigned later. Declarations are valid in any scope, including the global scope.</p>
        <p>Constant means that the <em>name</em> is constant, not the <em>value</em> – the value may still be changed if it allows it, i.e. is mutable.</p>
        <p>Constants are declared using the <code>let</code> keyword. Variables are declared using the <code>var</code> keyword. The keywords are followed by the name, an optional <a href="#type-annotations">type annotation</a>, an equals sign <code>=</code>, and the initial value.</p>
        <pre><code class="language-bamboo,file=constants-and-variables.bpl"><span style="color: #008000">// Declare a constant named `a`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: re-assigning to a constant</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">a = </span><span style="color: #09885A">2</span><span>
</span><span>
</span><span style="color: #008000">// Declare a variable named `b`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">3</span><span>
</span><span>
</span><span style="color: #008000">// Assign a new value to the variable named `b`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">b = </span><span style="color: #09885A">4</span><span>
</span></code></pre>
        <p>Variables and constants <strong>must</strong> be initialized.</p>
        <pre><code class="language-bamboo"><span style="color: #008000">// Invalid: the constant has no initial value</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a</span><span>
</span></code></pre>
        <p>Once a constant or variable is declared, it cannot be redeclared with the same name, with a different type, or changed into the corresponding other kind (variable to a constant and vice versa).</p>
        <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant named `a`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot re-declare a constant with name `a`,</span><span>
</span><span style="color: #008000">// as it is already used in this scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">2</span><span>
</span><span>
</span><span style="color: #008000">// Declare a variable named `b`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">3</span><span>
</span></code></pre>
        <pre><code class="language-bamboo"><span style="color: #008000">// Invalid: cannot re-declare a variable with name `b`,</span><span>
</span><span style="color: #008000">// as it is already used in this scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">4</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot declare a variable with the name `a`,</span><span>
</span><span style="color: #008000">// as it is already used in this scope,</span><span>
</span><span style="color: #008000">// and it is declared as a constant</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> a = </span><span style="color: #09885A">5</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="type-annotations"><a href="#type-annotations" aria-hidden="true"><span class="icon icon-link"></span></a>Type Annotations</h2>
        <p>When declaring a constant or variable, an optional <em>type annotation</em> can be provided, to make it explicit what type the declaration has.</p>
        <p>If no type annotation is provided, the type of the declaration is <a href="#type-inference">inferred from the initial value</a>.</p>
        <pre><code class="language-bamboo,file=type-annotations.bpl"><span style="color: #008000">// Declare a variable named `initialized` which has an explicit type annotation.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// `Bool` is the type of booleans</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> initialized: </span><span style="color: #0000FF">Bool</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant named `inferred`, which has no type annotation</span><span>
</span><span style="color: #008000">// and for which the type is inferred to be `Int`,</span><span>
</span><span style="color: #008000">// based on the initial value</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> inferred = </span><span style="color: #09885A">1</span><span>
</span></code></pre>
        <p>If a type annotation is provided, the initial value must be of this type, and new values assigned to variables must match the declaration's type. This type safety is explained in more detail in a <a href="#type-safety">separate section</a>.</p>
        <pre><code class="language-bamboo"><span style="color: #008000">// Invalid: declare a variable with an explicit type `Bool`,</span><span>
</span><span style="color: #008000">// but the initial value has type `Int`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// `Int` is the type of arbitrary-precision integers</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> booleanConstant: </span><span style="color: #0000FF">Bool</span><span style="color: #000000"> = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Declare a variable that has type `Bool`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> booleanVariable = </span><span style="color: #0000FF">false</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: assign a value with type `Int` to a variable which has type `Bool`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">booleanVariable = </span><span style="color: #09885A">1</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="naming"><a href="#naming" aria-hidden="true"><span class="icon icon-link"></span></a>Naming</h2>
        <p>
          Names may start with any upper and lowercase letter (A-Z, a-z) or an underscore (<code>_</code>). This may be followed by zero or more upper and lower case letters, underscores, and numbers (0-9).
          Names may not begin with a number.
        </p>
        <pre><code class="language-bamboo"><span style="color: #008000">// Valid, title-case</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">PersonID</span><span>
</span><span>
</span><span style="color: #008000">// Valid, with underscore</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">token_name</span><span>
</span><span>
</span><span style="color: #008000">// Valid, leading underscore</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">_balance</span><span>
</span><span>
</span><span style="color: #008000">// Valid, with number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">account2</span><span>
</span><span>
</span><span style="color: #008000">// Invalid, leading number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">1something</span><span>
</span><span>
</span><span style="color: #008000">// Invalid, various invalid characters</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">!@#$%^&#x26;*</span><span>
</span></code></pre>
        <section>
          <h3 id="conventions"><a href="#conventions" aria-hidden="true"><span class="icon icon-link"></span></a>Conventions</h3>
          <p>By convention, variables, constants, and functions have lowercase names; and types have title-case names.</p>
        </section>
      </section>
      <section>
        <h2 id="semicolons"><a href="#semicolons" aria-hidden="true"><span class="icon icon-link"></span></a>Semicolons</h2>
        <p>
          Semicolons (;) are used as statement separators.
          Semicolons can be placed after any statement, but can be omitted if only one statement appears on the line.
          Semicolons must be used to separate multiple statements if they appear on the same line.
        </p>
        <pre><code class="language-bamboo,file=semicolons.bpl"><span style="color: #008000">// Declare a constant, without a semicolon</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Declare a variable, with a semicolon</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">2</span><span style="color: #000000">;</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant and a variable on a single line, separated by semicolons</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> d = </span><span style="color: #09885A">1</span><span style="color: #000000">; </span><span style="color: #0000FF">var</span><span style="color: #000000"> e = </span><span style="color: #09885A">2</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="values-and-types"><a href="#values-and-types" aria-hidden="true"><span class="icon icon-link"></span></a>Values and Types</h2>
        <p>Values are objects, like for example booleans, integers, or arrays. Values are typed.</p>
        <section>
          <h3 id="booleans"><a href="#booleans" aria-hidden="true"><span class="icon icon-link"></span></a>Booleans</h3>
          <p>The two boolean values <code>true</code> and <code>false</code> have the type <code>Bool</code>.</p>
        </section>
        <section>
          <h3 id="numeric-literals"><a href="#numeric-literals" aria-hidden="true"><span class="icon icon-link"></span></a>Numeric Literals</h3>
          <p>Numbers can be written in various bases. Numbers are assumed to be decimal by default. Non-decimal literals have a specific prefix.</p>
          <table>
            <thead>
              <tr>
                <th align="left">Numeral system</th>
                <th align="left">Prefix</th>
                <th align="left">Characters</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left"><strong>Decimal</strong></td>
                <td align="left"><em>None</em></td>
                <td align="left">one or more numbers (<code>0</code> to <code>9</code>)</td>
              </tr>
              <tr>
                <td align="left"><strong>Binary</strong></td>
                <td align="left"><code>0b</code></td>
                <td align="left">one or more zeros or ones (<code>0</code> or <code>1</code>)</td>
              </tr>
              <tr>
                <td align="left"><strong>Octal</strong></td>
                <td align="left"><code>0o</code></td>
                <td align="left">one or more numbers in the range <code>0</code> to <code>7</code></td>
              </tr>
              <tr>
                <td align="left"><strong>Hexadecimal</strong></td>
                <td align="left"><code>0x</code></td>
                <td align="left">one or more numbers, or characters <code>a</code> to <code>f</code>, lowercase or uppercase</td>
              </tr>
            </tbody>
          </table>
          <pre><code class="language-bamboo,file=numbers.bpl"><span style="color: #008000">// A decimal number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #09885A">1234567890</span><span>
</span><span>
</span><span style="color: #008000">// A binary number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #09885A">0b101010</span><span>
</span><span>
</span><span style="color: #008000">// An octal number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #09885A">0o12345670</span><span>
</span><span>
</span><span style="color: #008000">// A hexadecimal number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #09885A">0x1234567890ABCDEFabcdef</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: unsupported prefix 0z</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">0z0</span><span>
</span></code></pre>
          <p>Decimal numbers may contain underscores (<code>_</code>) to logically separate components.</p>
          <pre><code class="language-bamboo,file=number-underscores-decimal.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> largeNumber = </span><span style="color: #09885A">1_000_000</span><span>
</span></code></pre>
          <p>Underscores are allowed for all numeral systems.</p>
          <pre><code class="language-bamboo,file=number-underscores-binary.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> binaryNumber = </span><span style="color: #09885A">0b10_11_01</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="integers"><a href="#integers" aria-hidden="true"><span class="icon icon-link"></span></a>Integers</h3>
          <p>Integers are whole numbers without a fractional part. They are either <em>signed</em> (positive, zero, or negative) or <em>unsigned</em> (positive or zero) and are either 8 bits, 16 bits, 32 bits, 64 bits or arbitrarily large.</p>
          <p>The names for the integer types follow this naming convention: Signed integer types have an <code>Int</code> prefix, unsigned integer types have a <code>UInt</code> prefix, i.e., the integer types are named <code>Int8</code>, <code>Int16</code>, <code>Int32</code>, <code>Int64</code>, <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, and <code>UInt64</code>.</p>
          <ul>
            <li><strong><code>Int8</code></strong>: -128 through 127</li>
            <li><strong><code>Int16</code></strong>: -32768 through 32767</li>
            <li><strong><code>Int32</code></strong>: -2147483648 through 2147483647</li>
            <li><strong><code>Int64</code></strong>: -9223372036854775808 through 9223372036854775807</li>
            <li><strong><code>UInt16</code></strong>: 0 through 65535</li>
            <li><strong><code>UInt32</code></strong>: 0 through 4294967295</li>
            <li><strong><code>UInt64</code></strong>: 0 through 18446744073709551615</li>
          </ul>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant that has type `UInt8` and the value 10</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> smallNumber: UInt8 = </span><span style="color: #09885A">10</span><span>
</span></code></pre>
          <pre><code class="language-bamboo"><span style="color: #008000">// Invalid: negative literal cannot be used as an unsigned integer</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> invalidNumber: UInt8 = </span><span style="color: #09885A">-10</span><span>
</span></code></pre>
          <p>In addition, the arbitrary precision integer type <code>Int</code> is provided.</p>
          <pre><code class="language-bamboo"><span style="color: #0000FF">let</span><span style="color: #000000"> veryLargeNumber: Int = </span><span style="color: #09885A">10000000000000000000000000000000</span><span>
</span></code></pre>
          <p>Negative integers are encoded in two's complement representation.</p>
        </section>
        <section>
          <h3 id="floating-point-numbers"><a href="#floating-point-numbers" aria-hidden="true"><span class="icon icon-link"></span></a>Floating-Point Numbers</h3>
          <p>There is no support for floating point numbers.</p>
          <p>Contracts are not intended to work with values with error margins and therefore floating point arithmetic is not appropriate here. Fixed point numbers should be simulated using integers and a scale factor for now.</p>
        </section>
        <section>
          <h3 id="addresses"><a href="#addresses" aria-hidden="true"><span class="icon icon-link"></span></a>Addresses</h3>
          <p>The type <code>Address</code> represents an address. Addresses are unsigned integers with a size of 160 bits. Hexadecimal integer literals can be used to create address values.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant that has type `Address`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> someAddress: </span><span style="color: #0000FF">Address</span><span style="color: #000000"> = </span><span style="color: #09885A">0x06012c8cf97bead5deae237070f9587f8e7a266d</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Initial value is not compatible with type `Address`,</span><span>
</span><span style="color: #008000">// it is not a number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> notAnAddress: </span><span style="color: #0000FF">Address</span><span style="color: #000000"> = </span><span style="color: #A31515">""</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Initial value is not compatible with type `Address`,</span><span>
</span><span style="color: #008000">// it is a number, but larger than 160 bits</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> alsoNotAnAddress: </span><span style="color: #0000FF">Address</span><span style="color: #000000"> = </span><span style="color: #09885A">0x06012c8cf97bead5deae237070f9587f8e7a266d123456789</span><span>
</span></code></pre>
          <p>Integer literals are not inferred to be an address.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a number. Even though it happens to be a valid address,</span><span>
</span><span style="color: #008000">// it is not inferred as it.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> aNumber = </span><span style="color: #09885A">0x06012c8cf97bead5deae237070f9587f8e7a266d</span><span>
</span><span style="color: #008000">// `aNumber` has type `Int`</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="any"><a href="#any" aria-hidden="true"><span class="icon icon-link"></span></a>Any</h3>
          <p><code>Any</code> is the top type, i.e., all types are a subtype of it.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a variable that has the type `Any`.</span><span>
</span><span style="color: #008000">// Any value can be assigned to it, for example an integer.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> someValue: Any = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Assign a value with a different type, `Bool`</span><span>
</span><span style="color: #000000">someValue = </span><span style="color: #0000FF">true</span><span>
</span></code></pre>
          <p>However, using <code>Any</code> does not opt-out of type checking. It is invalid to access fields and call functions on <code>Any</code> typed values, as it has no fields and functions.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a variable that has the type `Any`. The initial value is an integer,</span><span>
</span><span style="color: #008000">// but the variable  still has the explicit type `Any`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a: Any = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Operator cannot be used for an `Any` value (`a`, left-hand side)</span><span>
</span><span style="color: #008000">// and an `Int` value (`2`, right-hand side)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">a + </span><span style="color: #09885A">2</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="never"><a href="#never" aria-hidden="true"><span class="icon icon-link"></span></a>Never</h3>
          <p><code>Never</code> is the bottom type, i.e., it is a subtype of all types. There is no value that has type <code>Never</code>. <code>Never</code> can be used as the return type for functions that never return normally. For example, it is the return type of the function <a href="#panic"><code>panic</code></a>.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a function named `crashAndBurn` which will never return,</span><span>
</span><span style="color: #008000">// because it calls the function named `panic`, which never returns</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> crashAndBurn(): Never {</span><span>
</span><span style="color: #000000">    panic(</span><span style="color: #A31515">"An unrecoverable error occurred"</span><span style="color: #000000">)</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="optionals"><a href="#optionals" aria-hidden="true"><span class="icon icon-link"></span></a>Optionals</h3>
          <p>Optionals are values which can represent the absence of a value. Optionals have two cases: either there is a value, or there is nothing.</p>
          <p>An optional type is declared using the <code>?</code> suffix for another type. For example, <code>Int</code> is a non-optional integer, and <code>Int?</code> is an optional integer, i.e. either nothing, or an integer.</p>
          <p>The value representing nothing is <code>nil</code>.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant which has an optional integer type,</span><span>
</span><span style="color: #008000">// with nil as its initial value</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a: Int? = </span><span style="color: #0000FF">nil</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant which has an optional integer type,</span><span>
</span><span style="color: #008000">// with 42 as its initial value</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b: Int? = </span><span style="color: #09885A">42</span><span>
</span></code></pre>
          <section>
            <h4 id="nil-coalescing-operator"><a href="#nil-coalescing-operator" aria-hidden="true"><span class="icon icon-link"></span></a>Nil-Coalescing Operator</h4>
            <p>
              The nil-coalescing operator <code>??</code> returns the value inside an optional if it contains a value,
              or returns an alternative value if the optional has no value, i.e., the optional value is <code>nil</code>.
            </p>
            <p>If the left-hand side is non-nil, the right-hand side is not evaluated.</p>
            <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant which has an optional integer type</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a: Int? = </span><span style="color: #0000FF">nil</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant with a non-optional integer type,</span><span>
</span><span style="color: #008000">// which is initialized to b if it is non-nil, or 42 otherwise</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b: Int = a ?? </span><span style="color: #09885A">42</span><span>
</span><span style="color: #008000">// `b` is 42, as `a` is nil</span><span>
</span></code></pre>
            <p>The nil-coalescing operator can only be applied to values which have an optional type.</p>
            <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant with a non-optional integer type</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: nil-coalescing operator is applied to a value which has a non-optional type</span><span>
</span><span style="color: #008000">// (a has the non-optional type `Int`)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b = a ?? </span><span style="color: #09885A">2</span><span>
</span></code></pre>
            <pre><code class="language-bamboo"><span style="color: #008000">// Invalid: nil-coalescing operator is applied to a value which has a non-optional type</span><span>
</span><span style="color: #008000">// (the integer literal is of type `Int`)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> c = </span><span style="color: #09885A">1</span><span style="color: #000000"> ?? </span><span style="color: #09885A">2</span><span>
</span></code></pre>
            <p>
              The alternative value, i.e. the right-hand side of the operator,
              must be the non-optional or optional type matching the type of the left-hand side.
            </p>
            <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant with a non-optional integer type</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: nil-coalescing operator is applied to a value of type `Int`,</span><span>
</span><span style="color: #008000">// but the alternative has type `Bool`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b = a ?? </span><span style="color: #0000FF">false</span><span>
</span></code></pre>
          </section>
          <section>
            <h4 id="conditional-downcasting-operator"><a href="#conditional-downcasting-operator" aria-hidden="true"><span class="icon icon-link"></span></a>Conditional Downcasting Operator</h4>
            <p>
              The conditional downcasting operator <code>as?</code> can be used to type cast a value to a type.
              The operator returns an optional.
              If the value has a type that is a subtype of the given type that should be casted to,
              the operator returns the value as the given type,
              otherwise the result is <code>nil</code>.
            </p>
            <pre><code class="language-bamboo,file=conditional-downcasting.bpl"><span style="color: #008000">// Declare a constant named `something` which has type `Any`,</span><span>
</span><span style="color: #008000">// with an initial value which has type `Int`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> something: Any = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Conditionally downcast the value of `something` to `Int`.</span><span>
</span><span style="color: #008000">// The cast succeeds, because the value has type `Int`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> number = something as? Int</span><span>
</span><span style="color: #008000">// `number` is 1 and has type `Int?`</span><span>
</span><span>
</span><span style="color: #008000">// Conditionally downcast the value of `something` to `Bool`.</span><span>
</span><span style="color: #008000">// The cast fails, because the value has type `Int`,</span><span>
</span><span style="color: #008000">// and `Bool` is not a subtype of `Int`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> boolean = something as? Bool</span><span>
</span><span style="color: #008000">// `boolean` is nil and has type `Bool?`</span><span>
</span></code></pre>
          </section>
        </section>
        <section>
          <h3 id="strings-and-characters"><a href="#strings-and-characters" aria-hidden="true"><span class="icon icon-link"></span></a>Strings and Characters</h3>
          <blockquote>
            <p>🚧 Status: Characters are not implemented yet.</p>
          </blockquote>
          <p>Strings are collections of characters. Strings have the type <code>String</code>, and characters have the type <code>Character</code>. Strings can be used to work with text in a Unicode-compliant way. Strings are immutable.</p>
          <p>String and character literals are enclosed in double quotation marks (<code>"</code>).</p>
          <pre><code class="language-bamboo"><span style="color: #0000FF">let</span><span style="color: #000000"> someString = </span><span style="color: #A31515">"Hello, world!"</span><span>
</span></code></pre>
          <p>String literals may contain escape sequences. An escape sequence starts with a backslash (<code>\</code>):</p>
          <ul>
            <li><code>\0</code>: Null character</li>
            <li><code>\\</code>: Backslash</li>
            <li><code>\t</code>: Horizontal tab</li>
            <li><code>\n</code>: Line feed</li>
            <li><code>\r</code>: Carriage return</li>
            <li><code>\"</code>: Double quotation mark</li>
            <li><code>\'</code>: Single quotation mark</li>
            <li><code>\u</code>: A Unicode scalar value, written as <code>\u{x}</code>, where <code>x</code> is a 1–8 digit hexadecimal number which needs to be a valid Unicode scalar value, i.e., in the range 0 to 0xD7FF and 0xE000 to 0x10FFFF inclusive</li>
          </ul>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant which contains two lines of text</span><span>
</span><span style="color: #008000">// (separated by the line feed character `\n`), and ends</span><span>
</span><span style="color: #008000">// with a thumbs up emoji, which has code point U+1F44D (0x1F44D)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> thumbsUpText =</span><span>
</span><span style="color: #000000">    </span><span style="color: #A31515">"This is the first line.\nThis is the second line with an emoji: \u{1F44D}"</span><span>
</span></code></pre>
          <p>The type <code>Character</code> represents a single, human-readable character. Characters are extended grapheme clusters, which consist of one or more Unicode scalars.</p>
          <p>For example, the single character <code>ü</code> can be represented in several ways in Unicode. First, it can be represented by a single Unicode scalar value <code>ü</code> ("LATIN SMALL LETTER U WITH DIAERESIS", code point U+00FC). Second, the same single character can be represented by two Unicode scalar values: <code>u</code> ("LATIN SMALL LETTER U", code point U+0075), and "COMBINING DIAERESIS" (code point U+0308). The combining Unicode scalar value is applied to the scalar before it, which turns a <code>u</code> into a <code>ü</code>.</p>
          <p>Still, both variants represent the same human-readable character <code>ü</code>.</p>
          <pre><code class="language-bamboo"><span style="color: #0000FF">let</span><span style="color: #000000"> singleScalar: </span><span style="color: #0000FF">Character</span><span style="color: #000000"> = </span><span style="color: #A31515">"\u{FC}"</span><span>
</span><span style="color: #008000">// `singleScalar` is `ü`</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> twoScalars: </span><span style="color: #0000FF">Character</span><span style="color: #000000"> = </span><span style="color: #A31515">"\u{75}\u{308}"</span><span>
</span><span style="color: #008000">// `twoScalars` is `ü`</span><span>
</span></code></pre>
          <p>Another example where multiple Unicode scalar values are rendered as a single, human-readable character is a flag emoji. These emojis consist of two "REGIONAL INDICATOR SYMBOL LETTER" Unicode scalar values.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">// Declare a constant for a string with a single character, the emoji</span><span>
</span><span style="color: #008000">// for the Canadian flag, which consists of two Unicode scalar values:</span><span>
</span><span style="color: #008000">// - REGIONAL INDICATOR SYMBOL LETTER C (U+1F1E8)</span><span>
</span><span style="color: #008000">// - REGIONAL INDICATOR SYMBOL LETTER A (U+1F1E6)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> canadianFlag: </span><span style="color: #0000FF">Character</span><span style="color: #000000"> = </span><span style="color: #A31515">"\u{1F1E8}\u{1F1E6}"</span><span>
</span><span style="color: #008000">// `canadianFlag` is `🇨🇦`</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="arrays"><a href="#arrays" aria-hidden="true"><span class="icon icon-link"></span></a>Arrays</h3>
          <p>Arrays are mutable, ordered collections of values. All values in an array must have the same type. Arrays may contain a value multiple times. Array literals start with an opening square bracket <code>[</code> and end with a closing square bracket <code>]</code>.</p>
          <pre><code class="language-bamboo,file=arrays.bpl"><span style="color: #008000">// An empty array</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">[]</span><span>
</span><span>
</span><span style="color: #008000">// An array with integers</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">[</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">, </span><span style="color: #09885A">3</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: mixed types</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">[</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">]</span><span>
</span></code></pre>
          <section>
            <h4 id="array-types"><a href="#array-types" aria-hidden="true"><span class="icon icon-link"></span></a>Array Types</h4>
            <p>Arrays either have a fixed size or are variably sized, i.e., elements can be added and removed.</p>
            <p>Fixed-size arrays have the type suffix <code>[N]</code>, where <code>N</code> is the size of the array. For example, a fixed-size array of 3 <code>Int8</code> elements has the type <code>Int8[3]</code>.</p>
            <p>Variable-size arrays have the type suffix <code>[]</code>. For example, the type <code>Int16[]</code> specifies a variable-size array of elements that have type <code>Int16</code>.</p>
            <pre><code class="language-bamboo,file=array-types.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> array: Int8[2] = [</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> arrays: Int16[2][3] = [</span><span>
</span><span style="color: #000000">    [</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">, </span><span style="color: #09885A">3</span><span style="color: #000000">],</span><span>
</span><span style="color: #000000">    [</span><span style="color: #09885A">4</span><span style="color: #000000">, </span><span style="color: #09885A">5</span><span style="color: #000000">, </span><span style="color: #09885A">6</span><span style="color: #000000">]</span><span>
</span><span style="color: #000000">]</span><span>
</span></code></pre>
          </section>
          <section>
            <h4 id="array-indexing"><a href="#array-indexing" aria-hidden="true"><span class="icon icon-link"></span></a>Array Indexing</h4>
            <p>To get the element of an array at a specific index, the indexing syntax can be used: The array is followed by an opening square bracket <code>[</code>, the indexing value, and ends with a closing square bracket <code>]</code>.</p>
            <p>Accessing an element which is out of bounds results in a fatal error.</p>
            <pre><code class="language-bamboo,file=arrays-indexing.bpl"><span style="color: #008000">// Declare an array</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> numbers = [</span><span style="color: #09885A">42</span><span style="color: #000000">, </span><span style="color: #09885A">23</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #008000">// Get the first number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">numbers[</span><span style="color: #09885A">0</span><span style="color: #000000">] </span><span style="color: #008000">// is 42</span><span>
</span><span>
</span><span style="color: #008000">// Get the second number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">numbers[</span><span style="color: #09885A">1</span><span style="color: #000000">] </span><span style="color: #008000">// is 23</span><span>
</span><span>
</span><span style="color: #008000">// Error: Index 2 is out of bounds</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">numbers[</span><span style="color: #09885A">2</span><span style="color: #000000">]</span><span>
</span></code></pre>
            <pre><code class="language-bamboo,file=arrays-nested-indexing.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> arrays = [[</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">], [</span><span style="color: #09885A">3</span><span style="color: #000000">, </span><span style="color: #09885A">4</span><span style="color: #000000">]]</span><span>
</span><span>
</span><span style="color: #008000">// Get the first number of the second array</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">arrays[</span><span style="color: #09885A">1</span><span style="color: #000000">][</span><span style="color: #09885A">0</span><span style="color: #000000">] </span><span style="color: #008000">// is 3</span><span>
</span></code></pre>
            <p>To set an element of an array at a specific index, the indexing syntax can be used as well.</p>
            <pre><code class="language-bamboo,file=array-indexing-assignment.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> numbers = [</span><span style="color: #09885A">42</span><span style="color: #000000">, </span><span style="color: #09885A">23</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #008000">// Change the second number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// NOTE: The declaration `numbers` is constant, which means that</span><span>
</span><span style="color: #008000">// the *name* is constant, not the *value* – the value, i.e. the array,</span><span>
</span><span style="color: #008000">// is mutable and can be changed</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">numbers[</span><span style="color: #09885A">1</span><span style="color: #000000">] = </span><span style="color: #09885A">2</span><span>
</span><span>
</span><span style="color: #008000">// `numbers` is [42, 2]</span><span>
</span></code></pre>
          </section>
        </section>
        <section>
          <h3 id="dictionaries"><a href="#dictionaries" aria-hidden="true"><span class="icon icon-link"></span></a>Dictionaries</h3>
          <p>Dictionaries are mutable, unordered collections of key-value associations. In a dictionary, all keys must have the same type, and all values must have the same type. Dictionaries may contain a key only once and may contain a value multiple times.</p>
          <p>Dictionary literals start with an opening brace <code>{</code> and end with a closing brace <code>}</code>. Keys are separated from values by a colon, and key-value associations are separated by commas.</p>
          <pre><code class="language-bamboo,file=dictionaries.bpl"><span style="color: #008000">// An empty dictionary</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">{}</span><span>
</span><span>
</span><span style="color: #008000">// A dictionary which associates integers with booleans</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">{</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">2</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: mixed types</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">{</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">false</span><span style="color: #000000">: </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <section>
            <h4 id="dictionary-types"><a href="#dictionary-types" aria-hidden="true"><span class="icon icon-link"></span></a>Dictionary Types</h4>
            <p>Dictionaries have the type suffix <code>[T]</code>, where <code>T</code> is the type of the key. For example, a dictionary with <code>Int</code> keys and <code>Bool</code> values has type <code>Bool[Int]</code>.</p>
            <pre><code class="language-bamboo,file=dictionary-types.bpl"><span style="color: #008000">// Declare a constant that has type `Bool[Int]`,</span><span>
</span><span style="color: #008000">// a dictionary mapping integers to booleans</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> booleans = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">0</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant that has type `Int[Bool]`,</span><span>
</span><span style="color: #008000">// a dictionary mapping booleans to integers</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> integers = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">true</span><span style="color: #000000">: </span><span style="color: #09885A">1</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">false</span><span style="color: #000000">: </span><span style="color: #09885A">0</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          </section>
          <section>
            <h4 id="dictionary-access"><a href="#dictionary-access" aria-hidden="true"><span class="icon icon-link"></span></a>Dictionary Access</h4>
            <p>To get the value for a specific key from a dictionary, the access syntax can be used: The dictionary is followed by an opening square bracket <code>[</code>, the key, and ends with a closing square bracket <code>]</code>.</p>
            <p>Accessing a key returns an <a href="#optionals">optional</a>: If the key is found in the dictionary, the value for the given key is returned, and if the key is not found, <code>nil</code> is returned.</p>
            <pre><code class="language-bamboo,file=dictionary-access-integer-keys.bpl"><span style="color: #008000">// Declare a constant that has type `Bool[Int]`,</span><span>
</span><span style="color: #008000">// a dictionary mapping integers to booleans</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> booleans = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">0</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// The result of accessing a key has type `Bool?`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">booleans[</span><span style="color: #09885A">1</span><span style="color: #000000">] </span><span style="color: #008000">// is true</span><span>
</span><span style="color: #000000">booleans[</span><span style="color: #09885A">0</span><span style="color: #000000">] </span><span style="color: #008000">// is false</span><span>
</span><span style="color: #000000">booleans[</span><span style="color: #09885A">2</span><span style="color: #000000">] </span><span style="color: #008000">// is nil</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Accessing a key which does not have type `Int`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">booleans[</span><span style="color: #A31515">"1"</span><span style="color: #000000">]</span><span>
</span></code></pre>
            <pre><code class="language-bamboo,file=dictionary-access-boolean-keys.bpl"><span style="color: #008000">// Declare a constant that has type `Int[Bool]`,</span><span>
</span><span style="color: #008000">// a dictionary mapping booleans to integers</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> integers = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">true</span><span style="color: #000000">: </span><span style="color: #09885A">1</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">false</span><span style="color: #000000">: </span><span style="color: #09885A">0</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// The result of accessing a key has type `Int?`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">integers[</span><span style="color: #0000FF">true</span><span style="color: #000000">] </span><span style="color: #008000">// is 1</span><span>
</span><span style="color: #000000">integers[</span><span style="color: #0000FF">false</span><span style="color: #000000">] </span><span style="color: #008000">// is 0</span><span>
</span></code></pre>
            <p>To set the value for a key of a dictionary, the access syntax can be used as well.</p>
            <pre><code class="language-bamboo,file=dictionary-assignment.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> booleans = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">0</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #000000">}</span><span>
</span><span style="color: #000000">booleans[</span><span style="color: #09885A">1</span><span style="color: #000000">] = </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #000000">booleans[</span><span style="color: #09885A">0</span><span style="color: #000000">] = </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// `booleans` is `{1: false, 0: true}`</span><span>
</span></code></pre>
          </section>
          <section>
            <h4 id="dictionary-keys"><a href="#dictionary-keys" aria-hidden="true"><span class="icon icon-link"></span></a>Dictionary Keys</h4>
            <p>Dictionary keys must be hashable and equatable, i.e., must implement the <a href="#hashable-interface"><code>Hashable</code></a> and <a href="#equatable-interface"><code>Equatable</code></a> <a href="#interfaces">interfaces</a>.</p>
            <p>Most of the built-in types, like booleans, integers, are hashable and equatable, so can be used as keys in dictionaries.</p>
          </section>
        </section>
      </section>
      <section>
        <h2 id="operators"><a href="#operators" aria-hidden="true"><span class="icon icon-link"></span></a>Operators</h2>
        <p>Operators are special symbols that perform a computation for one or more values. They are either unary, binary, or ternary.</p>
        <ul>
          <li>
            <p>Unary operators perform an operation for a single value. The unary operator symbol appears before the value.</p>
          </li>
          <li>
            <p>Binary operators operate on two values. The binary operator symbol appears between the two values (infix).</p>
          </li>
          <li>
            <p>Ternary operators operate on three values. The operator symbols appear between the three values (infix).</p>
          </li>
        </ul>
        <section>
          <h3 id="negation"><a href="#negation" aria-hidden="true"><span class="icon icon-link"></span></a>Negation</h3>
          <p>The <code>-</code> unary operator negates an integer:</p>
          <pre><code class="language-bamboo,file=integer-negation.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">-a </span><span style="color: #008000">// is -1</span><span>
</span></code></pre>
          <p>The <code>!</code> unary operator logically negates a boolean:</p>
          <pre><code class="language-bamboo,file=boolean-negation.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #000000">!a </span><span style="color: #008000">// is false</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="assignment"><a href="#assignment" aria-hidden="true"><span class="icon icon-link"></span></a>Assignment</h3>
          <p>The binary assignment operator <code>=</code> can be used to assign a new value to a variable. It is only allowed in a statement and is not allowed in expressions.</p>
          <pre><code class="language-bamboo,file=assignment.bpl"><span style="color: #0000FF">var</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">a = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// `a` is 2</span><span>
</span></code></pre>
          <p>The left-hand side of the assignment must be an identifier, followed by one or more index or access expressions.</p>
          <pre><code class="language-bamboo,file=assignment-numbers.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> numbers = [</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #008000">// Change the first number</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">numbers[</span><span style="color: #09885A">0</span><span style="color: #000000">] = </span><span style="color: #09885A">3</span><span>
</span><span>
</span><span style="color: #008000">// `numbers` is [3, 2]</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=assignment-arrays.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> arrays = [[</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">], [</span><span style="color: #09885A">3</span><span style="color: #000000">, </span><span style="color: #09885A">4</span><span style="color: #000000">]]</span><span>
</span><span>
</span><span style="color: #008000">// Change the first number in the second array</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">arrays[</span><span style="color: #09885A">1</span><span style="color: #000000">][</span><span style="color: #09885A">0</span><span style="color: #000000">] = </span><span style="color: #09885A">5</span><span>
</span><span>
</span><span style="color: #008000">// `arrays` is [[1, 2], [5, 4]]</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=assignment-dictionaries.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> dictionaries = {</span><span>
</span><span style="color: #000000">  </span><span style="color: #0000FF">true</span><span style="color: #000000">: {</span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #09885A">2</span><span style="color: #000000">},</span><span>
</span><span style="color: #000000">  </span><span style="color: #0000FF">false</span><span style="color: #000000">: {</span><span style="color: #09885A">3</span><span style="color: #000000">: </span><span style="color: #09885A">4</span><span style="color: #000000">}</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">dictionaries[</span><span style="color: #0000FF">false</span><span style="color: #000000">][</span><span style="color: #09885A">3</span><span style="color: #000000">] = </span><span style="color: #09885A">0</span><span>
</span><span>
</span><span style="color: #008000">// `dictionaries` is {</span><span>
</span><span style="color: #008000">//   true: {1: 2},</span><span>
</span><span style="color: #008000">//   false: {3: 0}</span><span>
</span><span style="color: #008000">//}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="arithmetic"><a href="#arithmetic" aria-hidden="true"><span class="icon icon-link"></span></a>Arithmetic</h3>
          <p>There are four arithmetic operators:</p>
          <ul>
            <li>Addition: <code>+</code></li>
            <li>Subtraction: <code>-</code></li>
            <li>Multiplication: <code>*</code></li>
            <li>Division: <code>/</code></li>
            <li>Remainder: <code>%</code></li>
          </ul>
          <pre><code class="language-bamboo,file=operator-plus.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span style="color: #000000"> + </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// `a` is 3</span><span>
</span></code></pre>
          <p>The arguments for the operators need to be of the same type.</p>
          <p>Arithmetic operators do not cause values to overflow.</p>
          <pre><code class="language-bamboo,file=operator-times.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a: Int8 = </span><span style="color: #09885A">100</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b: Int8 = </span><span style="color: #09885A">100</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> c = a * b</span><span>
</span><span style="color: #008000">// `c` is 10000, and has type `Int`</span><span>
</span></code></pre>
          <p>If overflow behavior is intended, overflowing operators are available, which are prefixed with an <code>&#x26;</code>:</p>
          <ul>
            <li>Overflow addition: <code>&#x26;+</code></li>
            <li>Overflow subtraction: <code>&#x26;-</code></li>
            <li>Overflow multiplication: <code>&#x26;*</code></li>
          </ul>
          <p>For example, the maximum value of an unsigned 8-bit integer is 255 (binary 11111111). Adding 1 results in an overflow, truncation to 8 bits, and the value 0.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">//     11111111 = 255</span><span>
</span><span style="color: #008000">// &#x26;+         1</span><span>
</span><span style="color: #008000">//  = 100000000 = 0</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=operator-overflow-plus.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a: UInt8 = </span><span style="color: #09885A">255</span><span>
</span><span style="color: #000000">a &#x26;+ </span><span style="color: #09885A">1</span><span style="color: #000000"> </span><span style="color: #008000">// is 0</span><span>
</span></code></pre>
          <p>Similarly, for the minimum value 0, subtracting 1 wraps around and results in the maximum value 255.</p>
          <pre><code class="language-bamboo,file=operator-minus.bpl"><span style="color: #008000">//     00000000</span><span>
</span><span style="color: #008000">// &#x26;-         1</span><span>
</span><span style="color: #008000">//  =  11111111 = 255</span><span>
</span></code></pre>
          <pre><code class="language-bamboo"><span style="color: #0000FF">let</span><span style="color: #000000"> b: UInt8 = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #000000">b &#x26;- </span><span style="color: #09885A">1</span><span style="color: #000000"> </span><span style="color: #008000">// is 255</span><span>
</span></code></pre>
          <p>Signed integers are also affected by overflow. In a signed integer, the first bit is used for the sign. This leaves 7 bits for the actual value for an 8-bit signed integer, i.e., the range of values is -128 (binary 10000000) to 127 (01111111). Subtracting 1 from -128 results in 127.</p>
          <pre><code class="language-bamboo"><span style="color: #008000">//    10000000 = -128</span><span>
</span><span style="color: #008000">// &#x26;-        1</span><span>
</span><span style="color: #008000">//  = 01111111 = 127</span><span>
</span></code></pre>
          <pre><code class="language-bamboo"><span style="color: #0000FF">let</span><span style="color: #000000"> c: Int8 = </span><span style="color: #09885A">-128</span><span>
</span><span style="color: #000000">c &#x26;- </span><span style="color: #09885A">1</span><span style="color: #000000"> </span><span style="color: #008000">// is 127</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="logical-operators"><a href="#logical-operators" aria-hidden="true"><span class="icon icon-link"></span></a>Logical Operators</h3>
          <p>Logical operators work with the boolean values <code>true</code> and <code>false</code>.</p>
          <ul>
            <li>
              <p>Logical AND: <code>a &#x26;&#x26; b</code></p>
              <pre><code class="language-bamboo,file=operator-and.bpl"><span style="color: #0000FF">true</span><span style="color: #000000"> &#x26;&#x26; </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #0000FF">true</span><span style="color: #000000"> &#x26;&#x26; </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #0000FF">false</span><span style="color: #000000"> &#x26;&#x26; </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #0000FF">false</span><span style="color: #000000"> &#x26;&#x26; </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <p>If the left-hand side is true, the right-hand side is not evaluated.</p>
            </li>
            <li>
              <p>Logical OR: <code>a || b</code></p>
              <pre><code class="language-bamboo,file=operator-or.bpl"><span style="color: #0000FF">true</span><span style="color: #000000"> || </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #0000FF">true</span><span style="color: #000000"> || </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #0000FF">false</span><span style="color: #000000"> || </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #0000FF">false</span><span style="color: #000000"> || </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <p>If the left-hand side is false, the right-hand side is not evaluated.</p>
            </li>
          </ul>
        </section>
        <section>
          <h3 id="comparison-operators"><a href="#comparison-operators" aria-hidden="true"><span class="icon icon-link"></span></a>Comparison operators</h3>
          <p>Comparison operators work with boolean and integer values.</p>
          <ul>
            <li>
              <p>Equality: <code>==</code>, for booleans and integers (possibly optional)</p>
              <pre><code class="language-bamboo,file=operator-equal-int.bpl"><span style="color: #09885A">1</span><span style="color: #000000"> == </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #09885A">1</span><span style="color: #000000"> == </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-equal-bool.bpl"><span style="color: #0000FF">true</span><span style="color: #000000"> == </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #0000FF">true</span><span style="color: #000000"> == </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-equal-optional-int-nil.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int? = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">x == </span><span style="color: #0000FF">nil</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-equal-int-nil.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">x == </span><span style="color: #0000FF">nil</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-equal-int-nil.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int? = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> y: Int?? = </span><span style="color: #0000FF">nil</span><span>
</span><span style="color: #000000">x == y</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-equal-optional-int-optionals-int.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int? = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> y: Int?? = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">x == y</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
            </li>
            <li>
              <p>Inequality: <code>!=</code>, for booleans and integers (possibly optional)</p>
              <pre><code class="language-bamboo,file=operator-not-equal-int.bpl"><span style="color: #09885A">1</span><span style="color: #000000"> != </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #09885A">1</span><span style="color: #000000"> != </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-not-equal-bool.bpl"><span style="color: #0000FF">true</span><span style="color: #000000"> != </span><span style="color: #0000FF">true</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #0000FF">true</span><span style="color: #000000"> != </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-not-equal-optional-int-nil.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int? = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">x != </span><span style="color: #0000FF">nil</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-not-equal-int-nil.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">x != </span><span style="color: #0000FF">nil</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-not-equal-int-nil.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int? = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> y: Int?? = </span><span style="color: #0000FF">nil</span><span>
</span><span style="color: #000000">x != y</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
              <pre><code class="language-bamboo,file=operator-not-equal-optional-int-optionals-int.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x: Int? = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> y: Int?? = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">x != y</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
            </li>
            <li>
              <p>Less than: <code>&#x3C;</code>, for integers</p>
              <pre><code class="language-bamboo,file=operator-less.bpl"><span style="color: #09885A">1</span><span style="color: #000000"> &#x3C; </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #09885A">1</span><span style="color: #000000"> &#x3C; </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #09885A">2</span><span style="color: #000000"> &#x3C; </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
            </li>
            <li>
              <p>Less or equal than: <code>&#x3C;=</code>, for integers</p>
              <pre><code class="language-bamboo,file=operator-less-equals.bpl"><span style="color: #09885A">1</span><span style="color: #000000"> &#x3C;= </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #09885A">1</span><span style="color: #000000"> &#x3C;= </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #09885A">2</span><span style="color: #000000"> &#x3C;= </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is false</span><span>
</span></code></pre>
            </li>
            <li>
              <p>Greater than: <code>></code>, for integers</p>
              <pre><code class="language-bamboo,file=operator-greater.bpl"><span style="color: #09885A">1</span><span style="color: #000000"> > </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #09885A">1</span><span style="color: #000000"> > </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #09885A">2</span><span style="color: #000000"> > </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
            </li>
            <li>
              <p>Greater or equal than: <code>>=</code>, for integers</p>
              <pre><code class="language-bamboo,file=operator-greater-equals.bpl"><span style="color: #09885A">1</span><span style="color: #000000"> >= </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is true</span><span>
</span><span>
</span><span style="color: #09885A">1</span><span style="color: #000000"> >= </span><span style="color: #09885A">2</span><span>
</span><span style="color: #008000">// is false</span><span>
</span><span>
</span><span style="color: #09885A">2</span><span style="color: #000000"> >= </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// is true</span><span>
</span></code></pre>
            </li>
          </ul>
        </section>
        <section>
          <h3 id="ternary-conditional-operator"><a href="#ternary-conditional-operator" aria-hidden="true"><span class="icon icon-link"></span></a>Ternary Conditional Operator</h3>
          <p>There is only one ternary conditional operator, the ternary conditional operator (<code>a ? b : c</code>).</p>
          <p>It behaves like an if-statement, but is an expression: If the first operator value is true, the second operator value is returned. If the first operator value is false, the third value is returned.</p>
          <pre><code class="language-bamboo,file=operator-ternary-conditional.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">1</span><span style="color: #000000"> > </span><span style="color: #09885A">2</span><span style="color: #000000"> ? </span><span style="color: #09885A">3</span><span style="color: #000000"> : </span><span style="color: #09885A">4</span><span>
</span><span style="color: #008000">// `x` is 4</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="precedence-and-associativity"><a href="#precedence-and-associativity" aria-hidden="true"><span class="icon icon-link"></span></a>Precedence and Associativity</h3>
          <p>Operators have the following precedences, highest to lowest:</p>
          <ul>
            <li>Multiplication precedence: <code>*</code>, <code>&#x26;*</code>, <code>/</code>, <code>%</code></li>
            <li>Addition precedence: <code>+</code>, <code>&#x26;+</code>, <code>-</code>, <code>&#x26;-</code></li>
            <li>Relational precedence: <code>&#x3C;</code>, <code>&#x3C;=</code>, <code>></code>, <code>>=</code></li>
            <li>Equality precedence: <code>==</code>, <code>!=</code></li>
            <li>Logical conjunction precedence: <code>&#x26;&#x26;</code></li>
            <li>Logical disjunction precedence: <code>||</code></li>
            <li>Ternary precedence: <code>? :</code></li>
          </ul>
          <p>All operators are left-associative, except for the ternary operator, which is right-associative.</p>
          <p>Expressions can be wrapped in parentheses to override precedence conventions, i.e. an alternate order should be indicated, or when the default order should be emphasized, e.g. to avoid confusion. For example, <code>(2 + 3) * 4</code> forces addition to precede multiplication, and <code>5 + (6 * 7)</code> reinforces the default order.</p>
        </section>
      </section>
      <section>
        <h2 id="functions"><a href="#functions" aria-hidden="true"><span class="icon icon-link"></span></a>Functions</h2>
        <p>Functions are sequences of statements that perform a specific task. Functions have parameters (inputs) and an optional return value (output). Functions are typed: the function type consists of the parameter types and the return type.</p>
        <p>Functions are values, i.e., they can be assigned to constants and variables, and can be passed as arguments to other functions. This behavior is often called "first-class functions".</p>
        <section>
          <h3 id="function-declarations"><a href="#function-declarations" aria-hidden="true"><span class="icon icon-link"></span></a>Function Declarations</h3>
          <p>Functions can be declared by using the <code>fun</code> keyword, followed by the name of the declaration, the parameters, the optional return type, and the code that should be executed when the function is called.</p>
          <p>
            The parameters need to be enclosed in parentheses.
            The return type, if any, is separated from the parameters by a colon (<code>:</code>).
            The function code needs to be enclosed in opening and closing braces.
          </p>
          <p>
            Each parameter can have a label, the name that a function call needs to use to provide an argument value for the parameter.
            Argument labels precede the parameter name. The special argument label <code>_</code> indicates that a function call can omit the argument label.
            If no argument label is provided, the function call must use the parameter name.
          </p>
          <p>Each parameter needs to have a type annotation, which follows the parameter name after a colon.</p>
          <pre><code class="language-bamboo,file=function-double.bpl"><span style="color: #008000">// Declare a function named `double`, which multiples a number by two.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The special argument label _ is specified for the parameter,</span><span>
</span><span style="color: #008000">// so no argument label has to be provided in a function call</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> double(_ x: Int): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> x * </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Call the function named `double` with the value 4 for the first parameter.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The argument label can be omitted in the function call as the declaration</span><span>
</span><span style="color: #008000">// specifies the special argument label _ for the parameter</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">double(</span><span style="color: #09885A">2</span><span style="color: #000000">) </span><span style="color: #008000">// returns 4</span><span>
</span></code></pre>
          <p>It is possible to require argument labels for some parameters, and not require argument labels for other parameters.</p>
          <pre><code class="language-bamboo,file=function-clamp.bpl"><span style="color: #008000">// Declare a function named `clamp`. The function takes an integer value,</span><span>
</span><span style="color: #008000">// the lower limit, and the upper limit. It returns an integer between</span><span>
</span><span style="color: #008000">// the lower and upper limit.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// For the first parameter the special argument label _ is used,</span><span>
</span><span style="color: #008000">// so no argument label has to be given for it in a function call.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// For the second and third parameter no argument label is given,</span><span>
</span><span style="color: #008000">// so the parameter names are the argument labels, i.e., the parameter names</span><span>
</span><span style="color: #008000">// have to be given as argument labels in a function call.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> clamp(_ value: Int, min: Int, max: Int): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">if</span><span style="color: #000000"> value > max {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> max</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">if</span><span style="color: #000000"> value &#x3C; min {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> min</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> value</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant which has the result of a call to the function</span><span>
</span><span style="color: #008000">// named `clamp` as its initial value.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// For the first argument no label is given, as it is not required by</span><span>
</span><span style="color: #008000">// the function declaration (the special argument label `_` is specified).</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// For the second and this argument the labels must be provided,</span><span>
</span><span style="color: #008000">// as the function declaration does not specify the special argument label `_`</span><span>
</span><span style="color: #008000">// for these two parameters.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// As the function declaration also does not specify argument labels</span><span>
</span><span style="color: #008000">// for these parameters, the parameter names must be used as argument labels.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> clamped = clamp(</span><span style="color: #09885A">123</span><span style="color: #000000">, min: </span><span style="color: #09885A">0</span><span style="color: #000000">, max: </span><span style="color: #09885A">100</span><span style="color: #000000">)</span><span>
</span><span style="color: #008000">// `clamped` is 100</span><span>
</span></code></pre>
          <p>Argument labels make code more explicit and readable. For example, they avoid confusion about the order of arguments when there are multiple arguments that have the same type.</p>
          <p>Argument labels should be named so they make sense from the perspective of the function call.</p>
          <pre><code class="language-bamboo,file=function-send.bpl"><span style="color: #008000">// Declare a function named `send`, which transfers an amount</span><span>
</span><span style="color: #008000">// from one account to another.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The implementation is omitted for brevity.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The first two parameters of the function have the same type, so there is</span><span>
</span><span style="color: #008000">// a potential that a function call accidentally provides arguments in</span><span>
</span><span style="color: #008000">// the wrong order.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// While the parameter names `sendingAccount` and `receivingAccount`</span><span>
</span><span style="color: #008000">// are descriptive inside the function, they might be too verbose</span><span>
</span><span style="color: #008000">// to require them as argument labels in function calls.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// For this reason the shorter argument labels `from` and `to` are specified,</span><span>
</span><span style="color: #008000">// which still convey the meaning of the two parameters without being overly</span><span>
</span><span style="color: #008000">// verbose.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The name of the third parameter, `amount`, is both meaningful inside</span><span>
</span><span style="color: #008000">// the function and also in a function call, so no argument label is given,</span><span>
</span><span style="color: #008000">// and the parameter name is required as the argument label in a function call.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> send(from sendingAccount: </span><span style="color: #0000FF">Account</span><span style="color: #000000">, to receivingAccount: </span><span style="color: #0000FF">Account</span><span style="color: #000000">, amount: Int) {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant which refers to the sending account.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The initial value is omitted for brevity</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> sender: </span><span style="color: #0000FF">Account</span><span style="color: #000000"> = </span><span style="color: #008000">// ...</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant which refers to the receiving account.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The initial value is omitted for brevity</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> receiver: </span><span style="color: #0000FF">Account</span><span style="color: #000000"> = </span><span style="color: #008000">// ...</span><span>
</span><span>
</span><span style="color: #008000">// Call the function named `send`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The function declaration requires argument labels for all parameters,</span><span>
</span><span style="color: #008000">// so they need to be provided in the function call.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// This avoids ambiguity. For example, in some languages (like C) it is</span><span>
</span><span style="color: #008000">// a convention to order the parameters so that the receiver occurs first,</span><span>
</span><span style="color: #008000">// followed by the sender. In other languages, it is common to have</span><span>
</span><span style="color: #008000">// the sender be the first parameter, followed by the receiver.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Here, the order is clear – send an amount from an account to another account.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">send(from: sender, to: receiver, amount: </span><span style="color: #09885A">100</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>The order of the arguments in a function call must match the order of the parameters in the function declaration.</p>
          <pre><code class="language-bamboo,file=function-test.bpl"><span style="color: #008000">// Declare a function named `test`, which accepts two parameters, named `first` and `second`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> test(first: Int, second: Int) {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: the arguments are provided in the wrong order,</span><span>
</span><span style="color: #008000">// even though the argument labels are provided correctly</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">test(second: </span><span style="color: #09885A">1</span><span style="color: #000000">, first: </span><span style="color: #09885A">2</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>Functions can be nested, i.e., the code of a function may declare further functions.</p>
          <pre><code class="language-bamboo,file=function-doubleAndAddOne.bpl"><span style="color: #008000">// Declare a function which multiplies a number by two, and adds one</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> doubleAndAddOne(_ x: Int): Int {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a nested function which multiplies a number by two</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">fun</span><span style="color: #000000"> double(_ x: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> x * </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> double(x) + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">doubleAndAddOne(</span><span style="color: #09885A">2</span><span style="color: #000000">) </span><span style="color: #008000">// is 5</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="function-expressions"><a href="#function-expressions" aria-hidden="true"><span class="icon icon-link"></span></a>Function Expressions</h3>
          <p>Functions can be also used as expressions. The syntax is the same as for function declarations, except that function expressions have no name, i.e., it is anonymous.</p>
          <pre><code class="language-bamboo,file=function-expression.bpl"><span style="color: #008000">// Declare a constant named `double`, which has a function as its value.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The function multiplies a number by two when it is called</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> double =</span><span>
</span><span style="color: #000000">    fun (_ x: Int): Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> x * </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">    }</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="function-calls"><a href="#function-calls" aria-hidden="true"><span class="icon icon-link"></span></a>Function Calls</h3>
          <p>Functions can be called (invoked). Function calls need to provide exactly as many argument values as the function has parameters.</p>
          <pre><code class="language-bamboo,file=function-call.bpl"><span style="color: #0000FF">fun</span><span style="color: #000000"> double(_ x: Int): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> x * </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Valid: the correct amount of arguments is provided</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">double(</span><span style="color: #09885A">2</span><span style="color: #000000">) </span><span style="color: #008000">// is 4</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: too many arguments are provided</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">double(</span><span style="color: #09885A">2</span><span style="color: #000000">, </span><span style="color: #09885A">3</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: too few arguments are provided</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">double()</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="function-types"><a href="#function-types" aria-hidden="true"><span class="icon icon-link"></span></a>Function Types</h3>
          <p>Function types consist of the function's parameter types and the function's return type.</p>
          <p>
            The parameter types need to be enclosed in parentheses, followed by a colon (<code>:</code>), and end with the return type.
            The whole function type needs to be enclosed in parentheses.
          </p>
          <pre><code class="language-bamboo,file=function-type.bpl"><span style="color: #008000">// Declare a function named `add`, with the function type `((Int, Int): Int)`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> add(a: Int, b: Int): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> a + b</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=function-type-expression.bpl"><span style="color: #008000">// Declare a constant named `add`, with the function type `((Int, Int): Int)`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> add: ((Int, Int): Int) =</span><span>
</span><span style="color: #000000">    fun (a: Int, b: Int): Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> a + b</span><span>
</span><span style="color: #000000">    }</span><span>
</span></code></pre>
          <p>If the function has no return type, it implicitly has the return type <code>Void</code>.</p>
          <pre><code class="language-bamboo,file=function-doNothing.bpl"><span style="color: #008000">// Declare a constant named `doNothing`, which is a function</span><span>
</span><span style="color: #008000">// that takes no parameters and returns nothing</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> doNothing: ((): </span><span style="color: #0000FF">Void</span><span style="color: #000000">) =</span><span>
</span><span style="color: #000000">    fun () {}</span><span>
</span></code></pre>
          <p>
            Parentheses also control precedence.
            For example, a function type <code>((Int): ((): Int))</code> is the type for a function which accepts one argument with type <code>Int</code>,
            and which returns another function, that takes no arguments and returns an <code>Int</code>.
          </p>
          <p>The type <code>((Int): Int)[2]</code> specifies an array type of two functions, which accept one integer and return one integer.</p>
          <section>
            <h4 id="argument-passing-behavior"><a href="#argument-passing-behavior" aria-hidden="true"><span class="icon icon-link"></span></a>Argument Passing Behavior</h4>
            <p>
              When arguments are passed to a function, they are copied.
              Therefore, values that are passed into a function are unchanged in the caller's scope when the function returns.
              This behavior is known as <a href="https://en.wikipedia.org/w/index.php?title=Evaluation_strategy&#x26;oldid=896280571#Call_by_value">call-by-value</a>.
            </p>
            <pre><code class="language-bamboo,file=function-change.bpl"><span style="color: #008000">// Declare a function that changes the first two elements</span><span>
</span><span style="color: #008000">// of an array of integers</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> change(_ numbers: Int[]) {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Change the elements of the passed in array.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The changes are only local, as the array was copied</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    numbers[</span><span style="color: #09885A">0</span><span style="color: #000000">] = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">    numbers[</span><span style="color: #09885A">1</span><span style="color: #000000">] = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// `numbers` is [1, 2]</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> numbers = [</span><span style="color: #09885A">0</span><span style="color: #000000">, </span><span style="color: #09885A">1</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #000000">change(numbers)</span><span>
</span><span style="color: #008000">// `numbers` is still [0, 1]</span><span>
</span></code></pre>
            <p>Parameters are constant, i.e., it is not allowed to assign to them.</p>
            <pre><code class="language-bamboo,file=function-parameter-assignment.bpl"><span style="color: #0000FF">fun</span><span style="color: #000000"> test(x: Int) {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Invalid: cannot assign to a parameter (constant)</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    x = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          </section>
        </section>
        <section>
          <h3 id="function-preconditions-and-postconditions"><a href="#function-preconditions-and-postconditions" aria-hidden="true"><span class="icon icon-link"></span></a>Function Preconditions and Postconditions</h3>
          <p>Functions may have preconditions and may have postconditions. Preconditions and postconditions can be used to restrict the inputs (values for parameters) and output (return value) of a function.</p>
          <p>Preconditions must be true right before the execution of the function. Preconditions are part of the function and introduced by the <code>pre</code> keyword, followed by the condition block.</p>
          <p>Postconditions must be true right after the execution of the function. Postconditions are part of the function and introduced by the <code>post</code> keyword, followed by the condition block. Postconditions may only occur after preconditions, if any.</p>
          <p>A conditions block consists of one or more conditions. Conditions are expressions evaluating to a boolean. They may not call functions, i.e., they cannot have side-effects and must be pure expressions. Also, conditions may not contain function expressions.</p>
          <p>Conditions may be written on separate lines, or multiple conditions can be written on the same line, separated by a semicolon. This syntax follows the syntax for <a href="#semicolons">statements</a>.</p>
          <p>Following each condition, an optional description can be provided after a colon.</p>
          <p>In postconditions, the special constant <code>result</code> refers to the result of the function.</p>
          <pre><code class="language-bamboo,file=function-factorial.bpl"><span style="color: #0000FF">fun</span><span style="color: #000000"> factorial(_ n: Int): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pre</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Require the parameter `n` to be greater than or equal to zero</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        n >= </span><span style="color: #09885A">0</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">            </span><span style="color: #A31515">"factorial is only defined for integers greater than or equal to zero"</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Ensure the result will be greater than or equal to 1</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        result >= </span><span style="color: #09885A">1</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">            </span><span style="color: #A31515">"the result must be greater than or equal to 1"</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">if</span><span style="color: #000000"> n &#x3C; </span><span style="color: #09885A">1</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">       </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> n * factorial(n - </span><span style="color: #09885A">1</span><span style="color: #000000">)</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">factorial(</span><span style="color: #09885A">5</span><span style="color: #000000">) </span><span style="color: #008000">// returns 120</span><span>
</span><span>
</span><span style="color: #008000">// Error: the given argument does not satisfy the precondition `n >= 0` of the function</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">factorial(</span><span style="color: #09885A">-2</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>In postconditions, the special function <code>before</code> can be used to get the value of an expression just before the function is called.</p>
          <pre><code class="language-bamboo,file=function-increment.bpl"><span style="color: #0000FF">var</span><span style="color: #000000"> n = </span><span style="color: #09885A">0</span><span>
</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> incrementN() {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Require the new value of `n` to be the old value of `n`, plus one</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        n == before(n) + </span><span style="color: #09885A">1</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">            </span><span style="color: #A31515">"n must be incremented by 1"</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    n = n + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
      </section>
      <section>
        <h2 id="control-flow"><a href="#control-flow" aria-hidden="true"><span class="icon icon-link"></span></a>Control flow</h2>
        <p>Control flow statements control the flow of execution in a function.</p>
        <section>
          <h3 id="conditional-branching-if-statement"><a href="#conditional-branching-if-statement" aria-hidden="true"><span class="icon icon-link"></span></a>Conditional branching: if-statement</h3>
          <p>If-statements allow a certain piece of code to be executed only when a given condition is true.</p>
          <p>The if-statement starts with the <code>if</code> keyword, followed by the condition, and the code that should be executed if the condition is true inside opening and closing braces. The condition must be boolean and the braces are required.</p>
          <pre><code class="language-bamboo,file=control-flow-if.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">0</span><span>
</span><span>
</span><span style="color: #0000FF">if</span><span style="color: #000000"> a == </span><span style="color: #09885A">0</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">if</span><span style="color: #000000"> a != </span><span style="color: #09885A">0</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `b` is 1</span><span>
</span></code></pre>
          <p>
            An additional else-clause can be added to execute another piece of code when the condition is false.
            The else-clause is introduced by the <code>else</code> keyword.
          </p>
          <pre><code class="language-bamboo,file=control-flow-if-else.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">0</span><span>
</span><span>
</span><span style="color: #0000FF">if</span><span style="color: #000000"> a == </span><span style="color: #09885A">1</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">} </span><span style="color: #0000FF">else</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `b` is 2</span><span>
</span></code></pre>
          <p>The else-clause can contain another if-statement, i.e., if-statements can be chained together.</p>
          <pre><code class="language-bamboo,file=control-flow-if-else-if.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> b = </span><span style="color: #09885A">0</span><span>
</span><span>
</span><span style="color: #0000FF">if</span><span style="color: #000000"> a == </span><span style="color: #09885A">1</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">} </span><span style="color: #0000FF">else</span><span style="color: #000000"> </span><span style="color: #0000FF">if</span><span style="color: #000000"> a == </span><span style="color: #09885A">2</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">} </span><span style="color: #0000FF">else</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">   b = </span><span style="color: #09885A">3</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `b` is 3</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="looping-while-statement"><a href="#looping-while-statement" aria-hidden="true"><span class="icon icon-link"></span></a>Looping: while-statement</h3>
          <p>While-statements allow a certain piece of code to be executed repeatedly, as long as a condition remains true.</p>
          <p>The while-statement starts with the <code>while</code> keyword, followed by the condition, and the code that should be repeatedly executed if the condition is true inside opening and closing braces. The condition must be boolean and the braces are required.</p>
          <p>
            The while-statement will first evaluate the condition. If the condition is false, the execution is done.
            If it is true, the piece of code is executed and the evaluation of the condition is repeated. Thus, the piece of code is executed zero or more times.
          </p>
          <pre><code class="language-bamboo,file=control-flow-while.bpl"><span style="color: #0000FF">var</span><span style="color: #000000"> a = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">while</span><span style="color: #000000"> a &#x3C; </span><span style="color: #09885A">5</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">    a = a + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `a` is 5</span><span>
</span></code></pre>
          <p>The <code>continue</code> statement can be used to stop the current iteration of the loop and start the next iteration.</p>
          <pre><code class="language-bamboo,file=control-flow-continue.bpl"><span style="color: #0000FF">var</span><span style="color: #000000"> i = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> x = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">while</span><span style="color: #000000"> i &#x3C; </span><span style="color: #09885A">10</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">    i = i + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">if</span><span style="color: #000000"> i &#x3C; </span><span style="color: #09885A">5</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">continue</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">    x = x + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `x` is 6</span><span>
</span></code></pre>
          <p>The <code>break</code> statement can be used to stop the loop.</p>
          <pre><code class="language-bamboo,file=control-flow-break.bpl"><span style="color: #0000FF">var</span><span style="color: #000000"> x = </span><span style="color: #09885A">0</span><span>
</span><span style="color: #0000FF">while</span><span style="color: #000000"> x &#x3C; </span><span style="color: #09885A">10</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">    x = x + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">if</span><span style="color: #000000"> x == </span><span style="color: #09885A">5</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">break</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `x` is 5</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="immediate-function-return-return-statement"><a href="#immediate-function-return-return-statement" aria-hidden="true"><span class="icon icon-link"></span></a>Immediate function return: return-statement</h3>
          <p>The return-statement causes a function to return immediately, i.e., any code after the return-statement is not executed. The return-statement starts with the <code>return</code> keyword and is followed by an optional expression that should be the return value of the function call.</p>
        </section>
      </section>
      <section>
        <h2 id="scope"><a href="#scope" aria-hidden="true"><span class="icon icon-link"></span></a>Scope</h2>
        <p>Every function and block (<code>{</code> ... <code>}</code>) introduces a new scope for declarations. Each function and block can refer to declarations in its scope or any of the outer scopes.</p>
        <pre><code class="language-bamboo,file=scope.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">10</span><span>
</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> f(): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> y = </span><span style="color: #09885A">10</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> x + y</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">f() </span><span style="color: #008000">// returns 20</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: the identifier `y` is not in scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">y</span><span>
</span></code></pre>
        <pre><code class="language-bamboo,file=scope-doubleAndAddOne.bpl"><span style="color: #0000FF">fun</span><span style="color: #000000"> doubleAndAddOne(_ n: Int): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">fun</span><span style="color: #000000"> double(_ x: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> x * </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> double(n) + </span><span style="color: #09885A">1</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: the identifier `double` is not in scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">double(</span><span style="color: #09885A">1</span><span style="color: #000000">)</span><span>
</span></code></pre>
        <p>Each scope can introduce new declarations, i.e., the outer declaration is shadowed.</p>
        <pre><code class="language-bamboo,file=scope-test.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">2</span><span>
</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> test(): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">3</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> x</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">test() </span><span style="color: #008000">// returns 3</span><span>
</span></code></pre>
        <p>Scope is lexical, not dynamic.</p>
        <pre><code class="language-bamboo,file=scope-lexical.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">10</span><span>
</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> f(): Int {</span><span>
</span><span style="color: #000000">   </span><span style="color: #0000FF">return</span><span style="color: #000000"> x</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> g(): Int {</span><span>
</span><span style="color: #000000">   </span><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">20</span><span>
</span><span style="color: #000000">   </span><span style="color: #0000FF">return</span><span style="color: #000000"> f()</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">g() </span><span style="color: #008000">// returns 10, not 20</span><span>
</span></code></pre>
        <p>Declarations are <strong>not</strong> moved to the top of the enclosing function (hoisted).</p>
        <pre><code class="language-bamboo,file=scope-no-hoisting.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">2</span><span>
</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> f(): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">if</span><span style="color: #000000"> x == </span><span style="color: #09885A">0</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">let</span><span style="color: #000000"> x = </span><span style="color: #09885A">3</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> x</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> x</span><span>
</span><span style="color: #000000">}</span><span>
</span><span style="color: #000000">f() </span><span style="color: #008000">// returns 2</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="type-safety"><a href="#type-safety" aria-hidden="true"><span class="icon icon-link"></span></a>Type Safety</h2>
        <p>The Bamboo programming language is a <em>type-safe</em> language.</p>
        <p>When assigning a new value to a variable, the value must be the same type as the variable. For example, if a variable has type <code>Bool</code>, it can <em>only</em> be assigned a value that has type <code>Bool</code>, and not for example a value that has type <code>Int</code>.</p>
        <pre><code class="language-bamboo,file=type-safety-assign-int-to-bool.bpl"><span style="color: #008000">// Declare a variable that has type `Bool`</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> a = </span><span style="color: #0000FF">true</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot assign a value that has type `Int` to a variable which has type `Bool`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">a = </span><span style="color: #09885A">0</span><span>
</span></code></pre>
        <p>When passing arguments to a function, the types of the values must match the function parameters' types. For example, if a function expects an argument that has type <code>Bool</code>, <em>only</em> a value that has type <code>Bool</code> can be provided, and not for example a value which has type <code>Int</code>.</p>
        <pre><code class="language-bamboo,file=type-safety-nand.bpl"><span style="color: #0000FF">fun</span><span style="color: #000000"> nand(_ a: </span><span style="color: #0000FF">Bool</span><span style="color: #000000">, _ b: </span><span style="color: #0000FF">Bool</span><span style="color: #000000">): </span><span style="color: #0000FF">Bool</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> !(a &#x26;&#x26; b)</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">nand(</span><span style="color: #0000FF">false</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">) </span><span style="color: #008000">// returns true</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: integers are not booleans</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">nand(</span><span style="color: #09885A">0</span><span style="color: #000000">, </span><span style="color: #09885A">0</span><span style="color: #000000">)</span><span>
</span></code></pre>
        <p>Types are <strong>not</strong> automatically converted. For example, an integer is not automatically converted to a boolean, nor is an <code>Int32</code> automatically converted to an <code>Int8</code>, nor is an optional integer <code>Int?</code> automatically converted to a non-optional integer <code>Int</code>.</p>
        <pre><code class="language-bamboo,file=type-safety-add.bpl"><span style="color: #0000FF">fun</span><span style="color: #000000"> add(_ a: Int8, _ b: Int8): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> a + b</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">add(</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">) </span><span style="color: #008000">// returns 3</span><span>
</span><span>
</span><span style="color: #008000">// Declare two constants which have type `Int32`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a: Int32 = </span><span style="color: #09885A">3_000_000_000</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b: Int32 = </span><span style="color: #09885A">3_000_000_000</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot pass arguments which have type `Int32` to parameters which have type `Int8`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">add(a, b)</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="type-inference"><a href="#type-inference" aria-hidden="true"><span class="icon icon-link"></span></a>Type Inference</h2>
        <blockquote>
          <p>🚧 Status: Only basic type inference is implemented.</p>
        </blockquote>
        <p>If a variable or constant is not annotated explicitly with a type, it is inferred from the value.</p>
        <p>Integer literals are inferred to type <code>Int</code>.</p>
        <pre><code class="language-bamboo,file=type-inference-int.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// `a` has type `Int`</span><span>
</span></code></pre>
        <p>Array literals are inferred based on the elements of the literal, and to be variable-size.</p>
        <pre><code class="language-bamboo,file=type-inference-intergers.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> integers = [</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">]</span><span>
</span><span style="color: #008000">// `integers` has type `Int[]`</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: mixed types</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> invalidMixed = [</span><span style="color: #09885A">1</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #09885A">2</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">]</span><span>
</span></code></pre>
        <p>Dictionary literals are inferred based on the keys and values of the literal.</p>
        <pre><code class="language-bamboo,file=type-inference-dictionary.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> booleans = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">2</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span>
</span><span style="color: #000000">}</span><span>
</span><span style="color: #008000">// `booleans` has type `Bool[Int]`</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: mixed types</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> invalidMixed = {</span><span>
</span><span style="color: #000000">    </span><span style="color: #09885A">1</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">false</span><span style="color: #000000">: </span><span style="color: #09885A">2</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        <p>Functions are inferred based on the parameter types and the return type.</p>
        <pre><code class="language-bamboo,file=type-inference-function.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> add = (a: Int8, b: Int8): Int {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> a + b</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// `add` has type `((Int8, Int8): Int)`</span><span>
</span></code></pre>
        <p>Type inference is performed for eacg expression / statement, and not across statements.</p>
        <p>
          There are cases where types cannot be inferred.
          In these cases explicit type annotations are required.
        </p>
        <pre><code class="language-bamboo,file=type-inference-impossible.bpl"><span style="color: #008000">// Invalid: not possible to infer type based on array literal's elements</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> array = []</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: not possible to infer type based on dictionary literal's keys and values</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> dictionary = {}</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="composite-data-types"><a href="#composite-data-types" aria-hidden="true"><span class="icon icon-link"></span></a>Composite Data Types</h2>
        <blockquote>
          <p>🚧 Status: Resources are not implemented yet.</p>
        </blockquote>
        <p>Composite data types allow composing simpler types into more complex types, i.e., they allow the composition of multiple values into one. Composite data types have a name and consist of zero or more named fields, and zero or more functions that operate on the data. Each field may have a different type.</p>
        <p>
          There are two kinds of composite data types.
          The kinds differ in their usage and the behaviour when a value is used as the initial value for a constant or variable,
          when the value is assigned to a variable,
          when the value is passed as an argument to a function,
          and when the value is returned from a function:
        </p>
        <ul>
          <li>
            <p>
              <a href="#structures"><strong>Structures</strong></a> are <strong>copied</strong>, i.e. they are value types.
              Structures are useful when copies with independent state are desired.
            </p>
          </li>
          <li>
            <p><a href="#resources"><strong>Resources</strong></a> are <strong>moved</strong>, they are linear types and <strong>must</strong> be used <strong>exactly once</strong>.</p>
            <p>Resources are useful when it is desired to model ownership (a value exists exactly in one location and it should not be lost).</p>
            <p>
              Certain constructs in a blockchain represent assets of real, tangible value, as much as a house or car or bank account.
              We have to worry about literal loss and theft, perhaps even on the scale of millions of dollars.
            </p>
            <p>We think resources are a great way to represent such assets.</p>
          </li>
        </ul>
        <p>
          Two composite daya types are compatible if and only if they refer to the same declaration by name,
          i.e., nominal typing applies instead of structural typing.
        </p>
      </section>
      <section>
        <h2 id="composite-data-type-declaration-and-creation"><a href="#composite-data-type-declaration-and-creation" aria-hidden="true"><span class="icon icon-link"></span></a>Composite Data Type Declaration and Creation</h2>
        <p>Structures are declared using the <code>struct</code> keyword and resources are declared using the <code>resource</code> keyword. The keyword is followed by the name.</p>
        <pre><code class="language-bamboo,file=composite-data-type-declaration.bpl"><span style="color: #0000FF">struct</span><span style="color: #000000"> SomeStruct {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> SomeResource {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        <p>Structures and resources are types.</p>
        <p>Structures are created (instantiated) by calling the type like a function.</p>
        <pre><code class="language-bamboo,file=structure-instantiation.bpl"><span style="color: #000000">SomeStruct()</span><span>
</span></code></pre>
        <p>Resource are created (instantiated) by using the <code>create</code> keyword and calling the type like a function.</p>
        <pre><code class="language-bamboo,file=resource-instantiation.bpl"><span style="color: #000000">create SomeResource()</span><span>
</span></code></pre>
        <p>
          Composite data types can only be declared globally and not locally in functions.
          They can also not be nested.
        </p>
        <section>
          <h3 id="composite-data-type-fields"><a href="#composite-data-type-fields" aria-hidden="true"><span class="icon icon-link"></span></a>Composite Data Type Fields</h3>
          <p>Fields are declared like variables and constants, however, they have no initial value. The initial values for fields are set in the initializer. All fields <strong>must</strong> be initialized in the initializer. The initializer is declared using the <code>init</code> keyword. Just like a function, it takes parameters. However, it has no return type, i.e., it is always <code>Void</code>. The initializer always follows any fields.</p>
          <p>There are three kinds of fields.</p>
          <p>Variable fields are stored in the composite value and can have new values assigned to them. They are declared using the <code>var</code> keyword.</p>
          <p>Constant fields are also stored in the composite value, but they can <strong>not</strong> have new values assigned to them. They are declared using the <code>let</code> keyword.</p>
          <p>Synthetic fields are <strong>not</strong> stored in the composite value, i.e. they are derived/computed from other values. They can have new values assigned to them and are declared using the <code>synthetic</code> keyword. Synthetic fields must have a getter and a setter. Getters and setters are explained in the <a href="#composite-data-type-field-getters-and-setters">next section</a>. Synthetic fields are explained in a <a href="#synthetic-composite-data-type-fields">separate section</a>.</p>
          <table>
            <thead>
              <tr>
                <th>Field Kind</th>
                <th>Stored in memory</th>
                <th>Assignable</th>
                <th>Keyword</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Variable field</strong></td>
                <td>Yes</td>
                <td>Yes</td>
                <td><code>var</code></td>
              </tr>
              <tr>
                <td><strong>Constant field</strong></td>
                <td>Yes</td>
                <td><strong>No</strong></td>
                <td><code>let</code></td>
              </tr>
              <tr>
                <td><strong>Synthetic field</strong></td>
                <td><strong>No</strong></td>
                <td>Yes</td>
                <td><code>synthetic</code></td>
              </tr>
            </tbody>
          </table>
          <pre><code class="language-bamboo,file=composite-data-type-fields-and-init.bpl"><span style="color: #008000">// Declare a structure named `Token`, which has a constant field</span><span>
</span><span style="color: #008000">// named `id` and a variable field named `balance`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Both fields are initialized through the initializer</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> Token {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> id: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> balance: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(id: Int, balance: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.id = id</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = balance</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <p>In initializers, the special constant <code>self</code> refers to the composite value that is to be initialized.</p>
          <p>Fields can be read (if they are constant or variable) and set (if they are variable), using the access syntax: the composite value is followed by a dot (<code>.</code>) and the name of the field.</p>
          <pre><code class="language-bamboo,file=composite-data-type-fields-assignment.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> token = Token(id: </span><span style="color: #09885A">42</span><span style="color: #000000">, balance: </span><span style="color: #09885A">1_000_00</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #000000">token.id </span><span style="color: #008000">// is 42</span><span>
</span><span style="color: #000000">token.balance </span><span style="color: #008000">// is 1_000_000</span><span>
</span><span>
</span><span style="color: #000000">token.balance = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// `token.balance` is 1</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: assignment to constant field</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">token.id = </span><span style="color: #09885A">23</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="composite-data-type-field-getters-and-setters"><a href="#composite-data-type-field-getters-and-setters" aria-hidden="true"><span class="icon icon-link"></span></a>Composite Data Type Field Getters and Setters</h3>
          <p>Fields may have an optional getter and an optional setter. Getters are functions that are called when a field is read, and setters are functions that are called when a field is written.</p>
          <p>Getters and setters are enclosed in opening and closing braces, after the field's type.</p>
          <p>Getters are declared using the <code>get</code> keyword. Getters have no parameters and their return type is implicitly the type of the field.</p>
          <pre><code class="language-bamboo,file=composite-data-type-field-getter.bpl"><span style="color: #0000FF">struct</span><span style="color: #000000"> GetterExample {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a variable field named `balance` with a getter</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// which ensures the read value is always positive</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> balance: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">           </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">               result >= </span><span style="color: #09885A">0</span><span>
</span><span style="color: #000000">           }</span><span>
</span><span>
</span><span style="color: #000000">           </span><span style="color: #0000FF">if</span><span style="color: #000000"> </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance &#x3C; </span><span style="color: #09885A">0</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">               </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #09885A">0</span><span>
</span><span style="color: #000000">           }</span><span>
</span><span>
</span><span style="color: #000000">           </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = balance</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> example = GetterExample(balance: </span><span style="color: #09885A">10</span><span style="color: #000000">)</span><span>
</span><span style="color: #008000">// `example.balance` is 10</span><span>
</span><span>
</span><span style="color: #000000">example.balance = </span><span style="color: #09885A">-50</span><span>
</span><span style="color: #008000">// `example.balance` is 0. without the getter it would be -50</span><span>
</span></code></pre>
          <p>Setters are declared using the <code>set</code> keyword, followed by the name for the new value enclosed in parentheses. The parameter has implicitly the type of the field. Another type cannot be specified. Setters have no return type.</p>
          <p>The types of values assigned to setters must always match the field's type.</p>
          <pre><code class="language-bamboo,file=composite-data-type-field-setter.bpl"><span style="color: #0000FF">struct</span><span style="color: #000000"> SetterExample {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a variable field named `balance` with a setter</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// which requires written values to be positive</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> balance: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">set</span><span style="color: #000000">(newBalance) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">pre</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                newBalance >= </span><span style="color: #09885A">0</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = newBalance</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = balance</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> example = SetterExample(balance: </span><span style="color: #09885A">10</span><span style="color: #000000">)</span><span>
</span><span style="color: #008000">// `example.balance` is 10</span><span>
</span><span>
</span><span style="color: #008000">// error: precondition of setter for field balance failed</span><span>
</span><span style="color: #000000">example.balance = </span><span style="color: #09885A">-50</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="synthetic-composite-data-type-fields"><a href="#synthetic-composite-data-type-fields" aria-hidden="true"><span class="icon icon-link"></span></a>Synthetic Composite Data Type Fields</h3>
          <p>Fields which are not stored in the composite value are <em>synthetic</em>, i.e., the field value is computed. Synthetic can be either read-only, or readable and writable.</p>
          <p>Synthetic fields are declared using the <code>synthetic</code> keyword.</p>
          <p>Synthetic fields are read-only when only a getter is provided.</p>
          <pre><code class="language-bamboo,file=composite-type-synthetic-field-getter-only.bpl"><span style="color: #0000FF">struct</span><span style="color: #000000"> Rectangle {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> width: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> height: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a synthetic field named `area`,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// which computes the area based on the width and height</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    synthetic area: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">return</span><span style="color: #000000"> width * height</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(width: Int, height: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.width = width</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.height = height</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <p>Synthetic fields are readable and writable when both a getter and a setter is declared.</p>
          <pre><code class="language-bamboo,file=composite-type-synthetic-field-setter-getter.bpl"><span style="color: #008000">// Declare a struct named `GoalTracker` which stores a number</span><span>
</span><span style="color: #008000">// of target goals, a number of completed goals,</span><span>
</span><span style="color: #008000">// and has a synthetic field to provide the left number of goals</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// NOTE: the tracker only implements some functionality to demonstrate</span><span>
</span><span style="color: #008000">// synthetic fields, it is incomplete (e.g. assignments to `goal` are not handled properly)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> GoalTracker {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> goal: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> completed: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a synthetic field which is both readable</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// and writable.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// When the field is read from (in the getter),</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// the number of left goals is computed from</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// the target number of goals and</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// the completed number of goals.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// When the field is written to (in the setter),</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// the number of completed goals is updated,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// based on the number of target goals</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// and the new remaining number of goals</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    synthetic left: Double {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #0000FF">self</span><span style="color: #000000">.goal - </span><span style="color: #0000FF">self</span><span style="color: #000000">.completed</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">set</span><span style="color: #000000">(newLeft) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.completed = </span><span style="color: #0000FF">self</span><span style="color: #000000">.goal - newLeft</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(goal: Int, completed: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.goal = goal</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.completed = completed</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> tracker = GoalTracker(goal: </span><span style="color: #09885A">10</span><span style="color: #000000">, completed: </span><span style="color: #09885A">0</span><span style="color: #000000">)</span><span>
</span><span style="color: #008000">// `tracker.goal` is 10</span><span>
</span><span style="color: #008000">// `tracker.completed` is 0</span><span>
</span><span style="color: #008000">// `tracker.left` is 10</span><span>
</span><span>
</span><span style="color: #000000">tracker.completed = </span><span style="color: #09885A">1</span><span>
</span><span style="color: #008000">// `tracker.left` is 9</span><span>
</span><span>
</span><span style="color: #000000">tracker.left = </span><span style="color: #09885A">8</span><span>
</span><span style="color: #008000">// `tracker.completed` is 2</span><span>
</span></code></pre>
          <p>It is invalid to declare a synthetic field with only a setter.</p>
        </section>
        <section>
          <h3 id="composite-data-type-functions"><a href="#composite-data-type-functions" aria-hidden="true"><span class="icon icon-link"></span></a>Composite Data Type Functions</h3>
          <p>
            Composite data types may contain functions.
            Just like in the initializer, the special constant <code>self</code> refers to the composite value that the function is called on.
          </p>
          <pre><code class="language-bamboo,file=composite-data-type-function.bpl"><span style="color: #0000FF">struct</span><span style="color: #000000"> Rectangle {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> width: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> height: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(width: Int, height: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.width = width</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.height = height</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">fun</span><span style="color: #000000"> scale(factor: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.width = </span><span style="color: #0000FF">self</span><span style="color: #000000">.width * factor</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.height = </span><span style="color: #0000FF">self</span><span style="color: #000000">.height * factor</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> rectangle = Rectangle(width: </span><span style="color: #09885A">2</span><span style="color: #000000">, height: </span><span style="color: #09885A">3</span><span style="color: #000000">)</span><span>
</span><span style="color: #000000">rectangle.scale(factor: </span><span style="color: #09885A">4</span><span style="color: #000000">)</span><span>
</span><span style="color: #008000">// `rectangle.width` is 8</span><span>
</span><span style="color: #008000">// `rectangle.height` is 12</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="composite-data-type-behaviour"><a href="#composite-data-type-behaviour" aria-hidden="true"><span class="icon icon-link"></span></a>Composite Data Type Behaviour</h3>
          <section>
            <h4 id="structures"><a href="#structures" aria-hidden="true"><span class="icon icon-link"></span></a>Structures</h4>
            <p>
              Structures are <strong>copied</strong> when used as an initial value for constant or variable,
              when assigned to a different variable,
              when passed as an argument to a function,
              and when returned from a function:
            </p>
            <pre><code class="language-bamboo,file=struct-behavior.bpl"><span style="color: #008000">// Declare a structure named `SomeStruct`, with a variable integer field</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> SomeStruct {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> value: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(value: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.value = value</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant with value of structure type `SomeStruct`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = SomeStruct(value: </span><span style="color: #09885A">0</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// *Copy* the structure value into a new constant</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b = a</span><span>
</span><span>
</span><span style="color: #000000">b.value = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #000000">a.value </span><span style="color: #008000">// is *0*</span><span>
</span></code></pre>
          </section>
          <section>
            <h4 id="resources"><a href="#resources" aria-hidden="true"><span class="icon icon-link"></span></a>Resources</h4>
            <p>
              Resources are <strong>moved</strong> when used as an initial value for a constant or variable,
              when assigned to a different variable,
              when passed as an argument to a function,
              and when returned from a function.
            </p>
            <p>When the resource was moved, the constant or variable that referred to the resource before the move becomes <strong>invalid</strong>.</p>
            <p>To make the move explicit, the move operator <code>&#x3C;-</code> must be used when the resource is the initial value of a constant or variable, when it moved to a different variable, or when it moved to a function.</p>
            <pre><code class="language-bamboo,file=resource-behavior.bpl"><span style="color: #008000">// Declare a resource named `SomeResource`, with a variable integer field</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> SomeResource {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> value: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(value: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.value = value</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant with value of resource type `SomeResource`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a &#x3C;- </span><span style="color: #0000FF">SomeResource</span><span style="color: #000000">(</span><span style="color: #0000FF">value</span><span style="color: #000000">: 0)</span><span>
</span><span>
</span><span style="color: #008000">// *Move* the resource value to a new constant</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> b &#x3C;- </span><span style="color: #0000FF">a</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Cannot use constant `a` anymore as the resource</span><span>
</span><span style="color: #008000">// it referred to was moved to constant `b`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">a.value</span><span>
</span><span>
</span><span style="color: #008000">// Constant `b` owns the resource</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">b.value = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Declare a function which accepts a resource.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The parameter has a resource type, so the type name must be prefixed with `&#x3C;-`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> use(resource: &#x3C;-</span><span style="color: #0000FF">SomeResource</span><span style="color: #000000">) {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Call function `use` and move the resource into it</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">use(&#x3C;-b)</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Cannot use constant `b` anymore as the resource</span><span>
</span><span style="color: #008000">// it referred to was moved into function `foo`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">b.value</span><span>
</span></code></pre>
            <p>Resources <strong>must</strong> be used <strong>exactly once</strong>. To destroy a resource, the <code>destroy</code> keyword must be used.</p>
            <pre><code class="language-bamboo,file=resource-loss.bpl"><span style="color: #008000">// Declare another, unrelated value of resource type `SomeResource`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> c = SomeResource(value: </span><span style="color: #09885A">10</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: `c` is not used, but must be! `c` cannot be lost</span><span>
</span></code></pre>
            <pre><code class="language-bamboo,file=resource-destruction.bpl"><span style="color: #008000">// Declare another, unrelated value of resource type `SomeResource`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> d = SomeResource(value: </span><span style="color: #09885A">20</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// Destroy the resource referred to by constant `d`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">destroy d</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: Cannot use constant `d` anymore as the resource</span><span>
</span><span style="color: #008000">// it referred to was destroyed</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">d.value</span><span>
</span></code></pre>
            <p>To make it explicit that the type is moved, it must be prefixed with <code>&#x3C;-</code> in type annotations.</p>
            <pre><code class="language-bamboo,file=resource-type-annotation.bpl"><span style="color: #008000">// Declare a constant with an explicit type annotation.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The constant has a resource type, so the type name must be prefixed with `&#x3C;-`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> someResource: &#x3C;-</span><span style="color: #0000FF">SomeResource</span><span style="color: #000000"> &#x3C;- </span><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">SomeResource</span><span style="color: #000000">()</span><span>
</span><span>
</span><span style="color: #008000">// Declare a function which consumes a resource.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The parameter has a resource type, so the type name must be prefixed with `&#x3C;-`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> use(resource: &#x3C;-</span><span style="color: #0000FF">SomeResource</span><span style="color: #000000">) {</span><span>
</span><span style="color: #000000">    destroy resource</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a function which returns a resource.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The return type is a resource type, so the type name must be prefixed with `&#x3C;-`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">fun</span><span style="color: #000000"> get(): &#x3C;-</span><span style="color: #0000FF">SomeResource</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> create SomeResource()</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          </section>
          <section>
            <h4 id="resources-in-arrays-and-dictionaries"><a href="#resources-in-arrays-and-dictionaries" aria-hidden="true"><span class="icon icon-link"></span></a>Resources in Arrays and Dictionaries</h4>
            <p>
              Arrays and dictionaries behave differently when they contain resources:
              When a resource is <strong>read</strong> from the array at a certain index,
              or it is <strong>read</strong> from a dictionary by accessing a certain key,
              the resource is <strong>moved</strong> out of the array or dictionary.
            </p>
            <pre><code class="language-bamboo,file=resource-in-array.bpl"><span style="color: #0000FF">let</span><span style="color: #000000"> resources = [</span><span>
</span><span style="color: #000000">    SomeResource(value: </span><span style="color: #09885A">1</span><span style="color: #000000">),</span><span>
</span><span style="color: #000000">    SomeResource(value: </span><span style="color: #09885A">2</span><span style="color: #000000">),</span><span>
</span><span style="color: #000000">    SomeResource(value: </span><span style="color: #09885A">3</span><span style="color: #000000">)</span><span>
</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #008000">// **Move** the first resource into a new constant</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> firstResource &#x3C;- </span><span style="color: #0000FF">resources</span><span style="color: #000000">[0]</span><span>
</span><span>
</span><span style="color: #008000">// **Move** the second resource into a new constant</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> secondResource &#x3C;- </span><span style="color: #0000FF">resources</span><span style="color: #000000">[1]</span><span>
</span><span>
</span><span style="color: #008000">// `resources` only contains one element,</span><span>
</span><span style="color: #008000">// the initial third resource!</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The first two resources were moved out of the array when</span><span>
</span><span style="color: #008000">// they were read, i.e., the were removed from the array</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Accessing a field of a resource does not move the resource</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">resource[</span><span style="color: #09885A">0</span><span style="color: #000000">].value </span><span style="color: #008000">// is 3</span><span>
</span><span>
</span><span style="color: #008000">// Error: cannot access second element of `resources`,</span><span>
</span><span style="color: #008000">// as it only has one element left after the first two elements</span><span>
</span><span style="color: #008000">// were accessed above</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">resource[</span><span style="color: #09885A">1</span><span style="color: #000000">]</span><span>
</span></code></pre>
          </section>
        </section>
        <section>
          <h3 id="unbound-references--nulls"><a href="#unbound-references--nulls" aria-hidden="true"><span class="icon icon-link"></span></a>Unbound References / Nulls</h3>
          <p>There is <strong>no</strong> support for nulls`.</p>
        </section>
        <section>
          <h3 id="inheritance-and-abstract-types"><a href="#inheritance-and-abstract-types" aria-hidden="true"><span class="icon icon-link"></span></a>Inheritance and Abstract Types</h3>
          <p>There is <strong>no</strong> support for inheritance. Inheritance is a feature common in other programming languages, that allows including the fields and functions of one type in another type.</p>
          <p>Instead, follow the "composition over inheritance" principle, the idea of composing functionality from multiple individual parts, rather than building an inheritance tree.</p>
          <p>Furthermore, there is also <strong>no</strong> support for abstract types. An abstract type is a feature common in other programming languages, that prevents creating values of the type and only allows the creation of values of a subtype. In addition, abstract types may declare functions, but omit the implementation of them and instead require subtypes to implement them.</p>
          <p>Instead, consider using <a href="#interfaces">interfaces</a>.</p>
        </section>
      </section>
      <section>
        <h2 id="access-control"><a href="#access-control" aria-hidden="true"><span class="icon icon-link"></span></a>Access control</h2>
        <blockquote>
          <p>🚧 Status: Access control is not implemented yet.</p>
        </blockquote>
        <p>Access control allows making certain parts of the program accessible/visible and making other parts inaccessible/invisible. Top-level declarations (variables, constants, functions, structures, resources, interfaces) and fields (in structures, and resources) are either private or public.</p>
        <p><strong>Private</strong> means the declaration is only accessible/visible in the current and inner scopes. For example, a private field can only be accessed by functions of the type is part of, not by code that uses an instance of the type in an outer scope.</p>
        <p><strong>Public</strong> means the declaration is accessible/visible in all scopes, the current and inner scopes like for private, and the outer scopes. For example, a private field in a type can be accessed using the access syntax on an instance of the type in an outer scope.</p>
        <p>By default, everything is private. The <code>pub</code> keyword is used to make declarations public.</p>
        <p>The <code>(set)</code> suffix can be used to make variables also publicly writable.</p>
        <p>To summarize the behavior for variable declarations, constant declarations, and fields:</p>
        <table>
          <thead>
            <tr>
              <th align="left">Declaration kind</th>
              <th align="left">Access modifier</th>
              <th align="left">Read scope</th>
              <th align="left">Write scope</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left"><code>let</code></td>
              <td align="left"></td>
              <td align="left">Current and inner</td>
              <td align="left"><em>None</em></td>
            </tr>
            <tr>
              <td align="left"><code>let</code></td>
              <td align="left"><code>pub</code></td>
              <td align="left"><strong>All</strong></td>
              <td align="left"><em>None</em></td>
            </tr>
            <tr>
              <td align="left"><code>var</code></td>
              <td align="left"></td>
              <td align="left">Current and inner</td>
              <td align="left">Current and inner</td>
            </tr>
            <tr>
              <td align="left"><code>var</code></td>
              <td align="left"><code>pub</code></td>
              <td align="left"><strong>All</strong></td>
              <td align="left">Current and inner</td>
            </tr>
            <tr>
              <td align="left"><code>var</code></td>
              <td align="left"><code>pub(set)</code></td>
              <td align="left"><strong>All</strong></td>
              <td align="left"><strong>All</strong></td>
            </tr>
          </tbody>
        </table>
        <p>To summarize the behavior for functions, structures, resources, and interfaces:</p>
        <table>
          <thead>
            <tr>
              <th align="left">Declaration kind</th>
              <th align="left">Access modifier</th>
              <th align="left">Access scope</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left"><code>fun</code>, <code>struct</code>, <code>resource</code>, <code>struct interface</code>, <code>resource interface</code></td>
              <td align="left"></td>
              <td align="left">Current and inner</td>
            </tr>
            <tr>
              <td align="left"><code>fun</code>, <code>struct</code>, <code>resource</code>, <code>struct interface</code>, <code>resource interface</code></td>
              <td align="left"><code>pub</code></td>
              <td align="left"><strong>All</strong></td>
            </tr>
          </tbody>
        </table>
        <pre><code class="language-bamboo,file=access-control-globals.bpl"><span style="color: #008000">// Declare a private constant, inaccessible/invisible in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Declare a public constant, accessible/visible in all scopes</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> b = </span><span style="color: #09885A">2</span><span>
</span></code></pre>
        <pre><code class="language-bamboo,file=acess-control-struct.bpl"><span style="color: #008000">// Declare a public struct, accessible/visible in all scopes</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">struct</span><span style="color: #000000"> SomeStruct {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a private constant field,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// only readable in the current and inner scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> a: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a public constant field, readable in all scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> b: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a private variable field,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// only readable and writable in the current and inner scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> c: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a public variable field, not settable,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// only writable in the current and inner scopes,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// readable in all scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> d: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a public variable field, settable,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// readable and writable in all scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    pub(set) </span><span style="color: #0000FF">var</span><span style="color: #000000"> e: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: initializer implementation skipped</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a private function,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// only callable in the current and inner scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">fun</span><span style="color: #000000"> privateTest() {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a public function,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// callable in all scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> privateTest() {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The initializer is omitted for brevity.</span><span>
</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> some = SomeStruct()</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot read private constant field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.a</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot set private constant field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.a = </span><span style="color: #09885A">1</span><span>
</span><span>
</span><span style="color: #008000">// Valid: can read public constant field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.b</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot set public constant field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.b = </span><span style="color: #09885A">2</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot read private variable field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.c</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot set private variable field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.c = </span><span style="color: #09885A">3</span><span>
</span><span>
</span><span style="color: #008000">// Valid: can read public variable field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.d</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot set public variable field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.d = </span><span style="color: #09885A">4</span><span>
</span><span>
</span><span style="color: #008000">// Valid: can read publicly settable variable field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.e</span><span>
</span><span>
</span><span style="color: #008000">// Valid: can set publicly settable variable field in outer scope</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">some.e = </span><span style="color: #09885A">5</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="interfaces"><a href="#interfaces" aria-hidden="true"><span class="icon icon-link"></span></a>Interfaces</h2>
        <blockquote>
          <p>🚧 Status: Interfaces are implemented, but have the syntax <code>struct S: Interface1, ... {}</code></p>
        </blockquote>
        <p>
          An interface is an abstract type that specifies the behavior of types that <em>implement</em> the interface.
          Interfaces declare the required functions and fields, as well as the access for those declarations, that implementing types need to provide.
        </p>
        <p>There are two kinds of interfaces:</p>
        <ul>
          <li><strong>Structure interfaces</strong>: implemented by <a href="#structures">structures</a></li>
          <li><strong>Resource interfaces</strong>: implemented by <a href="#resources">resources</a></li>
        </ul>
        <p>Structure and resource types may implement multiple interfaces.</p>
        <p>
          Interfaces consist of the function and field requirements that a type implementing the interface must provide implementations for.
          Interface requirements, and therefore also their implementations, must always be at least public.
          Variable field requirements may be annotated to require them to be publicly settable.
        </p>
        <p>
          Function requirements consist of the name of the function, parameter types, an optional return type,
          and optional preconditions and postconditions.
        </p>
        <p>
          Field requirements consist of the name and the type of the field.
          Field requirements may optionally declare a getter requirement and a setter requirement, each with preconditions and postconditions.
        </p>
        <p>
          Calling functions with preconditions and postconditions on interfaces instead of concrete implementations can improve the security of a program,
          as it ensures that even if implementations change, some aspects of them will always hold.
        </p>
        <section>
          <h3 id="interface-declaration"><a href="#interface-declaration" aria-hidden="true"><span class="icon icon-link"></span></a>Interface Declaration</h3>
          <p>
            Interfaces are declared using the <code>struct</code> or <code>resource</code> keyword,
            followed by the <code>interface</code> keyword,
            the name of the interface,
            and the requirements, which must be enclosed in opening and closing braces.
          </p>
          <p>
            Field requirements can be annotated to require the implementation to be a variable field, by using the <code>var</code> keyword;
            require the implementation to be a constant field, by using the <code>let</code> keyword;
            or the field requirement may specify nothing,
            in which case the implementation may either be a variable field, a constant field, or a synthetic field.
          </p>
          <p>
            Field requirements and function requirements must specify the required level of access.
            The access must be at least be public, so the <code>pub</code> keyword must be provided.
            Variable field requirements can be specified to also be publicly settable by using the <code>pub(set)</code> keyword.
          </p>
          <p>The special type <code>Self</code> can be used to refer to the type implementing the interface.</p>
          <pre><code class="language-bamboo,file=interface-declaration.bpl"><span style="color: #008000">// Declare a resource interface for a fungible token.</span><span>
</span><span style="color: #008000">// Only resources can implement this resource interface</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> FungibleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Require the implementing type to provide a field for the balance</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// that is readable in all scopes (`pub`).</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Neither the `var` keyword, nor the `let` keyword is used,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// so the field may be implemented as either a variable field,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// a constant field, or a synthetic field.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The read balance must always be positive.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: no requirement is made for the kind of field,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// it can be either variable or constant in the implementation</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> balance: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                result >= </span><span style="color: #09885A">0</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"Balances are always non-negative"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Require the implementing type to provide an initializer that</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// given the initial balance, must initialize the balance field</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance == balance:</span><span>
</span><span style="color: #000000">                </span><span style="color: #A31515">"the balance must be initialized to the initial balance"</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// NOTE: no code</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Require the implementing type to provide a function that is</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// callable in all scopes, which withdraws an amount from</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// this fungible token and returns the withdrawn amount as</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// a new fungible token.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The given amount must be positive and the function implementation</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// must add the amount to the balance.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The function must return a new fungible token.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: `&#x3C;-Self` is the resource type implementing this interface</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> withdraw(amount: Int): &#x3C;-Self {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pre</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            amount > </span><span style="color: #09885A">0</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">                </span><span style="color: #A31515">"the amount must be positive"</span><span>
</span><span style="color: #000000">            amount &#x3C;= </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance:</span><span>
</span><span style="color: #000000">                </span><span style="color: #A31515">"insufficient funds: the amount must be smaller or equal to the balance"</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance == before(</span><span style="color: #0000FF">self</span><span style="color: #000000">.balance) - amount:</span><span>
</span><span style="color: #000000">                </span><span style="color: #A31515">"the amount must be deducted from the balance"</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// NOTE: no code</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Require the implementing type to provide a function that is</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// callable in all scopes, which deposits a fungible token</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// into this fungible token.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The given token must be of the same type – a deposit of another</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// type is not possible.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// No precondition is required to check the given token's balance</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// is positive, as this condition is already ensured by</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// the field requirement.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: the first parameter has the type `&#x3C;-Self`,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// i.e. the resource type implementing this interface</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> deposit(_ token: &#x3C;-Self) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance == before(</span><span style="color: #0000FF">self</span><span style="color: #000000">.balance) + token.balance:</span><span>
</span><span style="color: #000000">                </span><span style="color: #A31515">"the amount must be added to the balance"</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// NOTE: no code</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <p>Note that the required initializer and functions do not have any executable code.</p>
        </section>
        <section>
          <h3 id="interface-implementation"><a href="#interface-implementation" aria-hidden="true"><span class="icon icon-link"></span></a>Interface Implementation</h3>
          <p>
            Implementations for interfaces are declared using the <code>impl</code> keyword,
            followed by the name of interface, the <code>for</code> keyword,
            and the name of the composite data type (structure or resource) that provides the functionality required in the interface.
          </p>
          <pre><code class="language-bamboo,file=interface-implementation.bpl"><span style="color: #008000">// Declare a resource named `ExampleToken` with a variable field named `balance`,</span><span>
</span><span style="color: #008000">// that can be written by functions of the type, but outer scopes can only read it</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> ExampleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Implement the required field `balance` for the `FungibleToken` interface.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The interface does not specify if the field must be variable, constant,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// so in order for this type (`ExampleToken`) to be able to write to the field,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// but limit outer scopes to only read from the field, it is declared variable,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// and only has public access (non-settable).</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> balance: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Implement the required initializer for the `FungibleToken` interface:</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// accept an initial balance and initialize the `balance` field.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// This implementation satisfies the required postcondition</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: the postcondition declared in the interface</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// does not have to be repeated here in the implementation</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = balance</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span>
</span><span style="color: #008000">// Declare the implementation of the interface `FungibleToken`</span><span>
</span><span style="color: #008000">// for the resource `ExampleToken`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl FungibleToken for ExampleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Implement the required function named `withdraw` of the interface</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// `FungibleToken`, that withdraws an amount from the token's balance.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The function must be public.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// This implementation satisfies the required postcondition.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: neither the precondition nor the postcondition declared</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// in the interface have to be repeated here in the implementation</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> withdraw(amount: Int): &#x3C;-</span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance - amount</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> create ExampleToken(balance: amount)</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Implement the required function named `deposit` of the interface</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// `FungibleToken`, that deposits the amount from the given token</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// to this token.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The function must be public.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: the type of the parameter is `&#x3C;-ExampleToken`,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// i.e., only a token of the same type can be deposited.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// This implementation satisfies the required postconditions.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// NOTE: neither the precondition nor the postcondition declared</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// in the interface have to be repeated here in the implementation</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> deposit(_ token: &#x3C;-</span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000">) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance + amount</span><span>
</span><span style="color: #000000">        destroy token</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant which has type `ExampleToken`,</span><span>
</span><span style="color: #008000">// and is initialized with such an example token</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> token &#x3C;- </span><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000">(</span><span style="color: #0000FF">balance</span><span style="color: #000000">: 100)</span><span>
</span><span>
</span><span style="color: #008000">// Withdraw 10 units from the token.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The amount satisfies the precondition of the `withdraw` function</span><span>
</span><span style="color: #008000">// in the `FungibleToken` interface</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> withdrawn &#x3C;- </span><span style="color: #0000FF">token</span><span style="color: #000000">.</span><span style="color: #0000FF">withdraw</span><span style="color: #000000">(</span><span style="color: #0000FF">amount</span><span style="color: #000000">: 10)</span><span>
</span><span>
</span><span style="color: #008000">// The postcondition of the `withdraw` function in the `FungibleToken`</span><span>
</span><span style="color: #008000">// interface ensured the balance field of the token was updated properly</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// `token.balance` is 90</span><span>
</span><span style="color: #008000">// `withdrawn.balance` is 10</span><span>
</span><span>
</span><span style="color: #008000">// Deposit the withdrawn token into another one.</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> receiver: </span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000"> &#x3C;- </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #0000FF">receiver</span><span style="color: #000000">.</span><span style="color: #0000FF">deposit</span><span style="color: #000000">(&#x3C;-</span><span style="color: #0000FF">withdrawn</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// Error: precondition of function `withdraw` in interface</span><span>
</span><span style="color: #008000">// `FungibleToken` is not satisfied: the parameter `amount`</span><span>
</span><span style="color: #008000">// is larger than the field `balance` (100 > 90)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">token.withdraw(amount: </span><span style="color: #09885A">100</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>The access level for variable fields in an implementation may be less restrictive than the interface requires. For example, an interface may require a field to be at least public (i.e. the <code>pub</code> keyword is specified), and an implementation may provide a variable field which is public, but also publicly settable (the <code>pub(set)</code> keyword is specified).</p>
          <pre><code class="language-bamboo"><span style="color: #0000FF">struct interface</span><span style="color: #000000"> AnInterface {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Require the implementing type to provide a publicly readable</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// field named `a` that has type `Int`. It may be a constant field,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// a variable field, or a synthetic field.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> a: Int</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> AnImplementation {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Declare a publicly settable variable field named `a`that has type `Int`.</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// This implementation satisfies the requirement for interface `AnInterface`:</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The field is at least publicly readable, but this implementation also</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// allows the field to be written to in all scopes</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    pub(set) </span><span style="color: #0000FF">var</span><span style="color: #000000"> a: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(a: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.a = a</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">impl AnInterface for AnImplementation {</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// This implementation is empty, as the declaration</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// of the structure `AnImplementation` already fully satisfies</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// the requirements of the interface `AnInterface`,</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// i.e. a field named `a` that has type `Int` must be provided</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="interface-type"><a href="#interface-type" aria-hidden="true"><span class="icon icon-link"></span></a>Interface Type</h3>
          <p>Interfaces are types. Values implementing an interface can be used as initial values for constants and variables that have the interface as their type.</p>
          <pre><code class="language-bamboo,file=interface-type.bpl"><span style="color: #008000">// Declare an interface named `Shape`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Require implementing types to provide a field which returns the area,</span><span>
</span><span style="color: #008000">// and a function which scales the shape by a given factor.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct interface</span><span style="color: #000000"> Shape {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> area: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> scale(factor: Int)</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a structure named `Square`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> Square {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> length: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> synthetic area: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #0000FF">self</span><span style="color: #000000">.length * </span><span style="color: #0000FF">self</span><span style="color: #000000">.length</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">init</span><span style="color: #000000">(length: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.length = length</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `Shape` for the structure `Square`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Shape for Square {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> scale(factor: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.length = </span><span style="color: #0000FF">self</span><span style="color: #000000">.length * factor</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a structure named `Rectangle`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> Rectangle {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> width: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> height: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> synthetic area: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #0000FF">self</span><span style="color: #000000">.width * </span><span style="color: #0000FF">self</span><span style="color: #000000">.height</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">init</span><span style="color: #000000">(width: Int, height: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.width = width</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.height = height</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `Rectangle` for the structure `Square`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Shape for Rectangle {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> scale(factor: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.width = </span><span style="color: #0000FF">self</span><span style="color: #000000">.width * factor</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.height = </span><span style="color: #0000FF">self</span><span style="color: #000000">.height * factor</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant that has type `Shape`, which has a value that has type `Rectangle`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">var</span><span style="color: #000000"> shape: </span><span style="color: #0000FF">Shape</span><span style="color: #000000"> = Rectangle(width: </span><span style="color: #09885A">10</span><span style="color: #000000">, height: </span><span style="color: #09885A">20</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>Values implementing an interface are assignable to variables that have the interface as their type.</p>
          <pre><code class="language-bamboo,file=interface-type-assignment.bpl"><span style="color: #008000">// Assign a value of type `Square` to the variable `shape` that has type `Shape`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">shape = Square(length: </span><span style="color: #09885A">30</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// Invalid: cannot initialize a constant that has type `Rectangle`</span><span>
</span><span style="color: #008000">// with a value that has type `Square`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> rectangle: </span><span style="color: #0000FF">Rectangle</span><span style="color: #000000"> = Square(length: </span><span style="color: #09885A">10</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>Fields declared in an interface can be accessed and functions declared in an interface can be called on values of a type that implements the interface.</p>
          <pre><code class="language-bamboo,file=interface-type-fields-and-functions.bpl"><span style="color: #008000">// Declare a constant which has the type `Shape`</span><span>
</span><span style="color: #008000">// and is initialized with a value that has type `Rectangle`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> shape: </span><span style="color: #0000FF">Shape</span><span style="color: #000000"> = Rectangle(width: </span><span style="color: #09885A">2</span><span style="color: #000000">, height: </span><span style="color: #09885A">3</span><span style="color: #000000">)</span><span>
</span><span>
</span><span style="color: #008000">// Access the field `area` declared in the interface `Shape`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">shape.area </span><span style="color: #008000">// is 6</span><span>
</span><span>
</span><span style="color: #008000">// Call the function `scale` declared in the interface `Shape`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">shape.scale(factor: </span><span style="color: #09885A">3</span><span style="color: #000000">)</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="interface-implementation-requirements"><a href="#interface-implementation-requirements" aria-hidden="true"><span class="icon icon-link"></span></a>Interface Implementation Requirements</h3>
          <p>
            Interfaces can require implementing types to also implement other interfaces of the same kind.
            Interface implementation requirements can be declared by following the interface name with a colon (<code>:</code>)
            and one or more names of interfaces of the same kind, separated by commas.
          </p>
          <pre><code class="language-bamboo,file=interface-implementation-requirement.bpl"><span style="color: #008000">// Declare a structure interface named `Shape`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct interface</span><span style="color: #000000"> Shape {}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a structure interface named `Polygon`.</span><span>
</span><span style="color: #008000">// Require implementing types to also implement</span><span>
</span><span style="color: #008000">// the structure interface `Shape`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct interface</span><span style="color: #000000"> Polygon: Shape {}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a structure named `Hexagon`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> Hexagon {}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the structure interface `Polygon`</span><span>
</span><span style="color: #008000">// for the structure `Hexagon`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Polygon for Hexagon {}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the structure interface `Shape`</span><span>
</span><span style="color: #008000">// for the structure `Hexagon`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// This is required, as the interface `Polygon`</span><span>
</span><span style="color: #008000">// specified this implementation requirement.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Shape for Hexagon {}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="interface-nesting"><a href="#interface-nesting" aria-hidden="true"><span class="icon icon-link"></span></a>Interface Nesting</h3>
          <p>
            Interfaces can be arbitrarily nested.
            Declaring an interface inside another does not require implementing types of the outer interface to provide an implementation of the inner interfaces.
          </p>
          <pre><code class="language-bamboo,file=interface-nesting.bpl"><span style="color: #008000">// Declare a resource interface `OuterInterface`, which declares</span><span>
</span><span style="color: #008000">// a nested structure interface named `InnerInterface`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Resources implementing `OuterInterface` do not need to provide</span><span>
</span><span style="color: #008000">// an implementation of `InnerInterface`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Structures may just implement `InnerInterface`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> OuterInterface {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">struct interface</span><span style="color: #000000"> InnerInterface {}</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a resource named `SomeOuter`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> SomeOuter {}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `OuterInterface` for the resource  `SomeOuter`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The resource is not required to implement `OuterInterface.InnerInterface`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl OuterInterface for SomeOuter {}</span><span>
</span><span>
</span><span>
</span><span style="color: #008000">// Declare a structure named `SomeInner`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> SomeInner {}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `InnerInterface` which is nested in</span><span>
</span><span style="color: #008000">// interface `OuterInterface` for the structure `SomeInner`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl OuterInterface.InnerInterface for SomeInner {}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="nested-type-requirements"><a href="#nested-type-requirements" aria-hidden="true"><span class="icon icon-link"></span></a>Nested Type Requirements</h3>
          <p>
            Interfaces can require implementing types to provide concrete nested types.
            For example, a resource interface may require an implementing type to provide a resource type.
          </p>
          <pre><code class="language-bamboo,file=interface-nested-type-requirement.bpl"><span style="color: #008000">// Declare a resource interface named `FungibleToken`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Require implementing types to provide a resource type named `Vault`</span><span>
</span><span style="color: #008000">// which must have a field named `balance`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> FungibleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">resource</span><span style="color: #000000"> Vault {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> balance: Int</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Declare a resource named `ExampleToken`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> ExampleToken {}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the resource interface `FungibleToken`</span><span>
</span><span style="color: #008000">// for resource type `ExampleToken`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The nested type `Vault` must be provided</span><span>
</span><span style="color: #008000">// to conform to the interface.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl FungibleToken for ExampleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">resource</span><span style="color: #000000"> Vault {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> balance: Int</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = balance</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="equatable-interface"><a href="#equatable-interface" aria-hidden="true"><span class="icon icon-link"></span></a><code>Equatable</code> Interface</h3>
          <blockquote>
            <p>🚧 Status: The <code>Equatable</code> interface is not implemented yet.</p>
          </blockquote>
          <p>An equatable type is a type that can be compared for equality. Types are equatable when they implement the <code>Equatable</code> interface.</p>
          <p>Equatable types can be compared for equality using the equals operator (<code>==</code>) or inequality using the unequals operator (<code>!=</code>).</p>
          <p>Most of the built-in types are equatable, like booleans and integers. Arrays are equatable when their elements are equatable. Dictionaries are equatable when their values are equatable.</p>
          <p>To make a type equatable the <code>Equatable</code> interface must be implemented, which requires the implementation of the function <code>equals</code>, which accepts another value that the given value should be compared for equality. Note that the parameter type is <code>Self</code>, i.e., the other value must have the same type as the implementing type.</p>
          <pre><code class="language-bamboo,file=equatable.bpl"><span style="color: #0000FF">struct interface</span><span style="color: #000000"> Equatable {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> equals(_ other: Self): </span><span style="color: #0000FF">Bool</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=equatable-impl.bpl"><span style="color: #008000">// Declare a struct named `Cat`, which has one field named `id`</span><span>
</span><span style="color: #008000">// that has type `Int`, i.e., the identifier of the cat.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> Cat {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> id: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(id: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.id = id</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `Equatable` for the type `Cat`,</span><span>
</span><span style="color: #008000">// to allow cats to be compared for equality.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Equatable for Cat {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> equals(_ other: Self): </span><span style="color: #0000FF">Bool</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Cats are equal if their identifier matches.</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> other.id == </span><span style="color: #0000FF">self</span><span style="color: #000000">.id</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #000000">Cat(</span><span style="color: #09885A">1</span><span style="color: #000000">) == Cat(</span><span style="color: #09885A">2</span><span style="color: #000000">) </span><span style="color: #008000">// is false</span><span>
</span><span style="color: #000000">Cat(</span><span style="color: #09885A">3</span><span style="color: #000000">) == Cat(</span><span style="color: #09885A">3</span><span style="color: #000000">) </span><span style="color: #008000">// is true</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="hashable-interface"><a href="#hashable-interface" aria-hidden="true"><span class="icon icon-link"></span></a><code>Hashable</code> Interface</h3>
          <blockquote>
            <p>🚧 Status: The <code>Hashable</code> interface is not implemented yet.</p>
          </blockquote>
          <p>A hashable type is a type that can be hashed to an integer hash value, i.e., it is distilled into a value that is used as evidence of inequality. Types are hashable when they implement the <code>Hashable</code> interface.</p>
          <p>Hashable types can be used as keys in dictionaries.</p>
          <p>Hashable types must also be equatable, i.e., they must also implement the <code>Equatable</code> interface. This is because the hash value is only evidence for inequality: two values that have different hash values are guaranteed to be unequal. However, if the hash values of two values are the same, then the two values could still be unequal and just happen to hash to the same hash value. In that case equality still needs to be determined through an equality check. Without <code>Equatable</code>, values could be added to a dictionary, but it would not be possible to retrieve them.</p>
          <p>Most of the built-in types are hashable, like booleans and integers. Arrays are hashable when their elements are hashable. Dictionaries are hashable when their values are equatable.</p>
          <p>Hashing a value means passing its essential components into a hash function. Essential components are those that are used in the type's implementation of <code>Equatable</code>.</p>
          <p>If two values are equal because their <code>equals</code> function returns true, then the implementation must return the same integer hash value for each of the two values.</p>
          <p>The implementation must also consistently return the same integer hash value during the execution of the program when the essential components have not changed. The integer hash value must not necessarily be the same across multiple executions.</p>
          <pre><code class="language-bamboo,file=hashable.bpl"><span style="color: #0000FF">struct interface</span><span style="color: #000000"> Hashable: Equatable {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> hashValue: Int</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=hashable-impl.bpl"><span style="color: #008000">// Declare a structure named `Point` with two fields</span><span>
</span><span style="color: #008000">// named `x` and `y` that have type `Int`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">struct</span><span style="color: #000000"> Point {</span><span>
</span><span>
</span><span style="color: #000000">    pub(set) </span><span style="color: #0000FF">var</span><span style="color: #000000"> x: Int</span><span>
</span><span style="color: #000000">    pub(set) </span><span style="color: #0000FF">var</span><span style="color: #000000"> y: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">init</span><span style="color: #000000">(x: Int, y: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.x = x</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.y = y</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `Equatable` for the type `Point`,</span><span>
</span><span style="color: #008000">// to allow points to be compared for equality.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Equatable for Point {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> equals(_ other: Self): </span><span style="color: #0000FF">Bool</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Points are equal if their coordinates match.</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// The essential components are therefore the fields</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// `x` and `y`, which must be used in the `Hashable`</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// implementation.</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">return</span><span style="color: #000000"> other.x == </span><span style="color: #0000FF">self</span><span style="color: #000000">.x</span><span>
</span><span style="color: #000000">            &#x26;&#x26; other.y == </span><span style="color: #0000FF">self</span><span style="color: #000000">.y</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Implement the interface `Equatable` for the type `Point`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">impl Hashable for Point {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> synthetic hashValue: Int {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">var</span><span style="color: #000000"> hash = </span><span style="color: #09885A">7</span><span>
</span><span style="color: #000000">            hash = </span><span style="color: #09885A">31</span><span style="color: #000000"> * hash + </span><span style="color: #0000FF">self</span><span style="color: #000000">.x</span><span>
</span><span style="color: #000000">            hash = </span><span style="color: #09885A">31</span><span style="color: #000000"> * hash + </span><span style="color: #0000FF">self</span><span style="color: #000000">.y</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">return</span><span style="color: #000000"> hash</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
      </section>
      <section>
        <h2 id="attestations"><a href="#attestations" aria-hidden="true"><span class="icon icon-link"></span></a>Attestations</h2>
        <blockquote>
          <p>🚧 Status: Attestations are not implemented yet.</p>
        </blockquote>
        <p>
          Attestations are values that proof ownership.
          Attestations can be created for resources and reflect their current state, which is read-only.
          They cannot be stored.
        </p>
        <p>Attestations are useful in cases where ownership of some asset/resource should be demonstrated to potentially untrusted code.</p>
        <p>
          As an analogy, a bank statement is a proof of ownership of money.
          However, unlike a bank statement, an attestation is "live", i.e. it is not just a snapshot at the time it was created,
          but it reflects the current state of the underlying resource.
        </p>
        <p>Attestations can only be created from resources, i.e., they cannot be forged by parties who do not have ownership of the resource, and can be safely handed to untrusted parties.</p>
        <p>
          Attestations of resources are created using the <code>@</code> operator.
          Attestation types have the name of the resource type, prefixed with the <code>@</code> symbol.
        </p>
        <pre><code class="language-bamboo,file=attestations.bpl"><span style="color: #008000">// Declare a resource named `Token`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> Token {}</span><span>
</span><span>
</span><span style="color: #008000">// Create a new instance of the resource type `Token`.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> token &#x3C;- </span><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">Token</span><span style="color: #000000">()</span><span>
</span><span>
</span><span style="color: #008000">// Declare a constant named `attestation` that has the attestation type `@Token`,</span><span>
</span><span style="color: #008000">// and has an attestation for the token value as its initial value</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> attestation: @</span><span style="color: #0000FF">Token</span><span style="color: #000000"> = @token</span><span>
</span></code></pre>
        <p>Like resources, attestations are associated with an <a href="#accounts">account</a>.</p>
      </section>
      <section>
        <h2 id="accounts"><a href="#accounts" aria-hidden="true"><span class="icon icon-link"></span></a>Accounts</h2>
        <blockquote>
          <p>🚧 Status: Accounts are not implemented yet.</p>
        </blockquote>
        <pre><code class="language-bamboo"><span style="color: #0000FF">struct interface</span><span style="color: #000000"> Account {</span><span>
</span><span style="color: #000000">    address: Address</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="account-storage"><a href="#account-storage" aria-hidden="true"><span class="icon icon-link"></span></a>Account Storage</h2>
        <p>Accounts have a <code>storage</code> object which contains the stored values of the account.</p>
        <p>Only <strong>resources</strong> can be stored.</p>
        <p>Stored values are keyed by a <strong>type</strong>, i.e., the access operator <code>[]</code> is used for both reading and writing stored values.</p>
        <p>The stored value must be a subtype of the type it is keyed by.</p>
        <pre><code class="language-bamboo"><span style="color: #008000">// Declare a resource named `Counter`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> Counter {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> count: Int</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">init</span><span style="color: #000000">(count: Int) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.count = count</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> account: </span><span style="color: #0000FF">Account</span><span style="color: #000000"> = </span><span style="color: #008000">// ...</span><span>
</span><span>
</span><span style="color: #008000">// Create a new instance of the resource type `Counter` and move it</span><span>
</span><span style="color: #008000">// into the storage of the account.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The type `Counter` is used as the key to refer to the stored value</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">account.storage[Counter] &#x3C;- create Counter(count: </span><span style="color: #09885A">0</span><span style="color: #000000">)</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="usage-of-external-types"><a href="#usage-of-external-types" aria-hidden="true"><span class="icon icon-link"></span></a>Usage of External Types</h2>
        <blockquote>
          <p>🚧 Status: The usage of external types is not implemented yet.</p>
        </blockquote>
        <p>It is possible to use external types through the <code>import</code> keyword, followed by the type name, the <code>from</code> keyword, and the address literal where the declaration is deployed.</p>
        <pre><code class="language-bamboo"><span style="color: #008000">// Declaration for an interface named `Counter`,</span><span>
</span><span style="color: #008000">// declared and deployed externally</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> Counter {</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> count: Int</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> increment(_ count: Int)</span><span>
</span><span style="color: #000000">}</span><span>
</span><span>
</span><span style="color: #008000">// Use the type `Counter` from address</span><span>
</span><span style="color: #008000">// 0x06012c8cf97BEaD5deAe237070F9587f8E7A266d.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">import</span><span style="color: #000000"> Counter </span><span style="color: #0000FF">from</span><span style="color: #000000"> </span><span style="color: #09885A">0x06012c8cf97BEaD5deAe237070F9587f8E7A266d</span><span>
</span></code></pre>
      </section>
      <section>
        <h2 id="transactions"><a href="#transactions" aria-hidden="true"><span class="icon icon-link"></span></a>Transactions</h2>
        <p>Transactions are objects that are signed by one or more <a href="#accounts">accounts</a> and are sent to the chain to interact with it.</p>
        <p>Transactions have three phases: Preparation, execution, and postconditions.</p>
        <p>
          The preparer acts like the initializer in a composite data type, i.e., it initializes fields that can then be used in the execution phase.
          The preparer has the permissions to read and write to storage of all signer accounts.
        </p>
        <p>
          Transactions are declared using the <code>transaction</code> keyword.
          The preparer is declared using the <code>prepare</code> keyword and the execution phase is declared using the <code>execute</code> keyword.
          The <code>post</code> section can be used to declare postconditions.
        </p>
        <pre><code class="language-bamboo,file=transaction-declaration.bpl"><span style="color: #000000">transaction {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// Optional: fields, which must be initialized in `prepare`</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// The preparer needs to have as many account parameters</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">// as there are signers for the transaction</span><span>
</span><span style="color: #000000">    </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">    prepare(signer1: Account) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">execute</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        <section>
          <h3 id="deployment"><a href="#deployment" aria-hidden="true"><span class="icon icon-link"></span></a>Deployment</h3>
          <p>Transactions can deploy resources and resource interfaces.</p>
          <pre><code class="language-bamboo,file=fungible-token-interface.bpl"><span style="color: #008000">// Declare a resource interface for a fungible token.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// It requires implementing types to provide a resource named `Vault`,</span><span>
</span><span style="color: #008000">// which needs to implement the interfaces `Provider` and `Receiver`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> FungibleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> Provider {</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> withdraw(amount: Int): &#x3C;-</span><span style="color: #0000FF">Vault</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">pre</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                amount > </span><span style="color: #09885A">0</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"withdrawal amount must be positive"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                result.balance == amount:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"incorrect amount returned"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">resource interface</span><span style="color: #000000"> Receiver {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> deposit(vault: &#x3C;-</span><span style="color: #0000FF">Vault</span><span style="color: #000000">)</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">resource</span><span style="color: #000000"> Vault: Provider, Receiver {</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> balance: Int {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">get</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                    result >= </span><span style="color: #09885A">0</span><span style="color: #000000">:</span><span>
</span><span style="color: #000000">                        </span><span style="color: #A31515">"Balances are always non-negative"</span><span>
</span><span style="color: #000000">                }</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance == balance:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"the balance must be initialized to the initial balance"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> withdraw(amount: Int): &#x3C;-Self {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">pre</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                amount &#x3C;= </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"insufficient funds: the amount must be smaller or equal to the balance"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance == before(</span><span style="color: #0000FF">self</span><span style="color: #000000">.balance) - amount:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"Incorrect amount removed"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> deposit(vault: &#x3C;-Self) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">post</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">                </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance == before(</span><span style="color: #0000FF">self</span><span style="color: #000000">.balance) + vault.balance:</span><span>
</span><span style="color: #000000">                    </span><span style="color: #A31515">"the amount must be added to the balance"</span><span>
</span><span style="color: #000000">            }</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <p>
            Transactions can refer to local code with the <code>import</code> keyword,
            followed by the name of the type, the <code>from</code> keyword,
            and the string literal for the path of the file which contains the code of the type.
          </p>
          <p>
            The preparer can use the signing account's <code>deploy</code> function to deploy
            the resource interface.
          </p>
          <p>Once deployed, the resource interfaces is available in the account's <code>types</code> object.</p>
          <p>The <code>publish</code> operator is used to make the resource interface type publicly available.</p>
          <pre><code class="language-bamboo,file=deploy-resource-interface.bpl"><span>
</span><span style="color: #008000">// Refer to the resource interface type `FungibleToken`</span><span>
</span><span style="color: #008000">// in the local file "FungibleToken.bpl"</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">import</span><span style="color: #000000"> FungibleToken </span><span style="color: #0000FF">from</span><span style="color: #000000"> </span><span style="color: #A31515">"FungibleToken.bpl"</span><span>
</span><span>
</span><span style="color: #008000">// Execute a transaction which deploys the code for</span><span>
</span><span style="color: #008000">// the resource interface `FungibleToken`, and makes</span><span>
</span><span style="color: #008000">// the deployed type publicly available</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">transaction {</span><span>
</span><span>
</span><span style="color: #000000">    prepare(signer: Account) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Deploy the  resource interface type `FungibleToken`</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// in the signing account</span><span>
</span><span style="color: #000000">        signer.deploy(FungibleToken)</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Make the deployed type publicly available</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        publish signer.types[FungibleToken]</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <p>Just like resource interfaces it is possible to deploy resources.</p>
          <pre><code class="language-bamboo,file=example-token.bpl"><span style="color: #008000">// Declare a resource named `ExampleToken` which implements</span><span>
</span><span style="color: #008000">// the resource interface `FungibleToken`</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">resource</span><span style="color: #000000"> ExampleToken {}</span><span>
</span><span>
</span><span style="color: #000000">impl FungibleToken for ExampleToken {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">resource</span><span style="color: #000000"> Vault {</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> balance: Int</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">init</span><span style="color: #000000">(balance: Int) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = balance</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> withdraw(amount: Int): &#x3C;-</span><span style="color: #0000FF">Vault</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance - amount</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">return</span><span style="color: #000000"> create Vault(balance: amount)</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">pub</span><span style="color: #000000"> </span><span style="color: #0000FF">fun</span><span style="color: #000000"> deposit(_ vault: &#x3C;-</span><span style="color: #0000FF">Vault</span><span style="color: #000000">) {</span><span>
</span><span style="color: #000000">            </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance = </span><span style="color: #0000FF">self</span><span style="color: #000000">.balance + vault.balance</span><span>
</span><span style="color: #000000">            destroy vault</span><span>
</span><span style="color: #000000">        }</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    impl Receiver for Vault {}</span><span>
</span><span style="color: #000000">    impl Provider for Vault {}</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=deploy-resource.bpl"><span style="color: #0000FF">import</span><span style="color: #000000"> ExampleToken </span><span style="color: #0000FF">from</span><span style="color: #000000"> </span><span style="color: #A31515">"ExampleToken.bpl"</span><span>
</span><span>
</span><span style="color: #008000">// Execute a transaction which deploys the code for</span><span>
</span><span style="color: #008000">// the resource `ExampleToken`, and makes the deployed</span><span>
</span><span style="color: #008000">// type publicly available</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">transaction {</span><span>
</span><span>
</span><span style="color: #000000">    prepare(signer: Account) {</span><span>
</span><span style="color: #000000">        signer.deploy(ExampleToken)</span><span>
</span><span style="color: #000000">        publish signer.types[ExampleToken]</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
        <section>
          <h3 id="interacting-with-deployed-resources"><a href="#interacting-with-deployed-resources" aria-hidden="true"><span class="icon icon-link"></span></a>Interacting with Deployed Resources</h3>
          <p>
            Transactions can also refer to deployed code with the <code>import</code> keyword
            and the address of the account which contains the publicly available type.
          </p>
          <p>
            In addition to storing resources it is also possible to store references to <strong>stored</strong> resources or even other references.
            References can only be keyed by (and therefore accessed through) <strong>resource interfaces</strong>.
          </p>
          <p>
            References are created by using the <code>&#x26;</code> operator, followed by the stored resource or reference,
            the <code>as</code> operator, and the resource interface type.
          </p>
          <pre><code class="language-bamboo,file=setup-transaction.bpl"><span style="color: #008000">// Refer to the resource type `ExampleToken` deployed</span><span>
</span><span style="color: #008000">// at example address 0x42</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">import</span><span style="color: #000000"> ExampleToken </span><span style="color: #0000FF">from</span><span style="color: #000000"> </span><span style="color: #09885A">0x42</span><span>
</span><span>
</span><span style="color: #008000">// Execute a transaction which creates a new example token vault</span><span>
</span><span style="color: #008000">// for the signing account</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">transaction {</span><span>
</span><span>
</span><span style="color: #000000">    prepare(signer: Account) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Create a new example token vault for the signing account.</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// NOTE: the vault is not publicly accessible</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        signer.storage[ExampleToken.Vault] &#x3C;- create ExampleToken.Vault()</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Store two storage references in the signing account:</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// One reference to the stored vault, keyed by the resource</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// interface `Provider`, and another reference to the stored vault,</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// keyed by the resource interface `Provider`</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        signer.storage[ExampleToken.Provider] =</span><span>
</span><span style="color: #000000">            &#x26;signer.storage[ExampleToken.Vault] as ExampleToken.Provider</span><span>
</span><span>
</span><span style="color: #000000">        signer.storage[ExampleToken.Receiver] =</span><span>
</span><span style="color: #000000">            &#x26;signer.storage[ExampleToken.Vault] as ExampleToken.Receiver</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Publish only the receiver so it can be accessed publicly.</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// NOTE: neither the vault nor the publisher are published</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        publish signer.storage[ExampleToken.Receiver]</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
          <pre><code class="language-bamboo,file=send-transaction.bpl"><span style="color: #008000">// Refer to the resource type `ExampleToken` deployed</span><span>
</span><span style="color: #008000">// at example address 0x42</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #0000FF">import</span><span style="color: #000000"> ExampleToken </span><span style="color: #0000FF">from</span><span style="color: #000000"> </span><span style="color: #09885A">0x42</span><span>
</span><span>
</span><span style="color: #008000">// Execute a transaction which sends five coins from one account to another.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// The transaction fails unless there is a `ExampleToken.Provider` available</span><span>
</span><span style="color: #008000">// for the sending account and there is a public `ExampleToken.Receiver`</span><span>
</span><span style="color: #008000">// available for the recipient account.</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #008000">// Only a signature from the sender is required.</span><span>
</span><span style="color: #008000">// No signature from the recipient is required, as the receiver</span><span>
</span><span style="color: #008000">// is published/publicly available (if it exists for the recipient)</span><span>
</span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">transaction {</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> sentFunds: </span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000">.</span><span style="color: #0000FF">Vault</span><span>
</span><span>
</span><span style="color: #000000">    prepare(signer: Account) {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Get the stored provider for the signing account.</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// As the access is performed in the preparer,</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// the unpublished reference `ExampleToken.Provider`</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// can be accessed (if it exists)</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">let</span><span style="color: #000000"> provider &#x3C;- </span><span style="color: #0000FF">signer</span><span style="color: #000000">.</span><span style="color: #0000FF">storage</span><span style="color: #000000">[</span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000">.</span><span style="color: #0000FF">Provider</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Withdraw five coins (as a vault) from the provider</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// and move it into the field `sentFunds`</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">self</span><span style="color: #000000">.sentFunds &#x3C;- provider.withdraw(amount: </span><span style="color: #09885A">5</span><span style="color: #000000">)</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span>
</span><span style="color: #000000">    </span><span style="color: #0000FF">execute</span><span style="color: #000000"> {</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// The recipient account</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">let</span><span style="color: #000000"> recipient: </span><span style="color: #0000FF">Account</span><span style="color: #000000"> = </span><span style="color: #008000">// ...</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Get the stored receiver for the recipient account</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        </span><span style="color: #0000FF">let</span><span style="color: #000000"> receiver &#x3C;- </span><span style="color: #0000FF">recipient</span><span style="color: #000000">.</span><span style="color: #0000FF">storage</span><span style="color: #000000">[</span><span style="color: #0000FF">ExampleToken</span><span style="color: #000000">.</span><span style="color: #0000FF">Receiver</span><span style="color: #000000">]</span><span>
</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// Deposit the amount withdrawn from the signer</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">// in the recipient's vault through the receiver</span><span>
</span><span style="color: #000000">        </span><span style="color: #008000">//</span><span>
</span><span style="color: #000000">        receiver.deposit(vault: &#x3C;-</span><span style="color: #0000FF">self</span><span style="color: #000000">.sentFunds)</span><span>
</span><span style="color: #000000">    }</span><span>
</span><span style="color: #000000">}</span><span>
</span></code></pre>
        </section>
      </section>
      <section>
        <h2 id="built-in-functions"><a href="#built-in-functions" aria-hidden="true"><span class="icon icon-link"></span></a>Built-in Functions</h2>
        <section>
          <h3 id="panic"><a href="#panic" aria-hidden="true"><span class="icon icon-link"></span></a><code>panic</code></h3>
          <pre><code class="language-bamboo"><span style="color: #0000FF">fun</span><span style="color: #000000"> panic(_ message: </span><span style="color: #0000FF">String</span><span style="color: #000000">): Never</span><span>
</span></code></pre>
          <p>Terminates the program unconditionally and reports a message which explains why the unrecoverable error occurred.</p>
          <section>
            <h4 id="example"><a href="#example" aria-hidden="true"><span class="icon icon-link"></span></a>Example</h4>
            <pre><code class="language-bamboo"><span style="color: #0000FF">let</span><span style="color: #000000"> optionalAccount: </span><span style="color: #0000FF">Account</span><span style="color: #000000">? = </span><span style="color: #008000">// ...</span><span>
</span><span style="color: #0000FF">let</span><span style="color: #000000"> account = optionalAccount ?? panic(</span><span style="color: #A31515">"missing account"</span><span style="color: #000000">)</span><span>
</span></code></pre>
          </section>
        </section>
        <section>
          <h3 id="assert"><a href="#assert" aria-hidden="true"><span class="icon icon-link"></span></a><code>assert</code></h3>
          <pre><code class="language-bamboo"><span style="color: #0000FF">fun</span><span style="color: #000000"> assert(_ condition: </span><span style="color: #0000FF">Bool</span><span style="color: #000000">, message: </span><span style="color: #0000FF">String</span><span style="color: #000000">)</span><span>
</span></code></pre>
          <p>Terminates the program if the given condition is false, and reports a message which explains how the condition is false. Use this function for internal sanity checks.</p>
          <p>The message argument is optional.</p>
        </section>
      </section>
      <section>
        <h2 id="open-questions"><a href="#open-questions" aria-hidden="true"><span class="icon icon-link"></span></a>Open questions</h2>
        <section>
          <h3 id="shared-mutable-state"><a href="#shared-mutable-state" aria-hidden="true"><span class="icon icon-link"></span></a>Shared Mutable State</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/264">https://github.com/dapperlabs/bamboo-node/issues/264</a></p>
          </blockquote>
          <p>Do we need a means to model shared mutable state, i.e. reference types?</p>
        </section>
        <section>
          <h3 id="error-handling"><a href="#error-handling" aria-hidden="true"><span class="icon icon-link"></span></a>Error Handling</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/65">https://github.com/dapperlabs/bamboo-node/issues/65</a></p>
          </blockquote>
          <p>
            How should errors be handled?
            Should we make the distinction between exceptional and unexceptional errors?
            Should we provide means to handle errors (exception handlers)? Should exceptions be values and typed?
            Would a value-less throw-catch/panic-recover be suitable for a first version?
          </p>
        </section>
        <section>
          <h3 id="on-chain-storage"><a href="#on-chain-storage" aria-hidden="true"><span class="icon icon-link"></span></a>On-chain Storage</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/101">https://github.com/dapperlabs/bamboo-node/issues/101</a></p>
          </blockquote>
          <p>How do we store programs on-chain?</p>
        </section>
        <section>
          <h3 id="fixed-point-numbers-and-arithmetic"><a href="#fixed-point-numbers-and-arithmetic" aria-hidden="true"><span class="icon icon-link"></span></a>Fixed-Point Numbers and Arithmetic</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/67">https://github.com/dapperlabs/bamboo-node/issues/67</a></p>
          </blockquote>
          <p>
            We do not allow floating-point numbers.
            Should we add fixed-point arithmetic to support fractional numbers?
          </p>
        </section>
        <section>
          <h3 id="enums-with-exhaustiveness-check"><a href="#enums-with-exhaustiveness-check" aria-hidden="true"><span class="icon icon-link"></span></a>Enums with Exhaustiveness Check</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/59">https://github.com/dapperlabs/bamboo-node/issues/59</a></p>
          </blockquote>
          <p>
            Should we allow the definition of enumerations?
            Is an exhaustiveness check in switch statements useful and feasible?
          </p>
        </section>
        <section>
          <h3 id="switch-case-statement"><a href="#switch-case-statement" aria-hidden="true"><span class="icon icon-link"></span></a>Switch-Case Statement</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/60">https://github.com/dapperlabs/bamboo-node/issues/60</a></p>
          </blockquote>
          <p>
            Should we add a switch-case statement?
            What kind of pattern matching should it support?
          </p>
        </section>
        <section>
          <h3 id="distinctnew-types"><a href="#distinctnew-types" aria-hidden="true"><span class="icon icon-link"></span></a>Distinct/New Types</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/45">https://github.com/dapperlabs/bamboo-node/issues/45</a></p>
          </blockquote>
          <p>Should we add support for distinct types, i.e., types that are derived from an existing type, but are not compatible with them?</p>
        </section>
        <section>
          <h3 id="set-data-structure"><a href="#set-data-structure" aria-hidden="true"><span class="icon icon-link"></span></a>Set Data Structure</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/266">https://github.com/dapperlabs/bamboo-node/issues/266</a></p>
          </blockquote>
          <p>Should the standard library provide a set data structure?</p>
        </section>
        <section>
          <h3 id="generics"><a href="#generics" aria-hidden="true"><span class="icon icon-link"></span></a>Generics</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/44">https://github.com/dapperlabs/bamboo-node/issues/44</a></p>
          </blockquote>
          <p>Should we add generics? In what form? Is it OK to add them in a later version?</p>
        </section>
        <section>
          <h3 id="calls-of-pure-functions-in-preconditions-and-postconditions"><a href="#calls-of-pure-functions-in-preconditions-and-postconditions" aria-hidden="true"><span class="icon icon-link"></span></a>Calls of Pure Functions in Preconditions and Postconditions</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/70">https://github.com/dapperlabs/bamboo-node/issues/70</a></p>
          </blockquote>
          <p>
            It might be useful to call pure functions preconditions and postconditons.
            How do we ensure preconditions and postconditions are side-effect free?
          </p>
        </section>
        <section>
          <h3 id="late-initialization-of-variables-and-constants"><a href="#late-initialization-of-variables-and-constants" aria-hidden="true"><span class="icon icon-link"></span></a>Late Initialization of Variables and Constants</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/71">https://github.com/dapperlabs/bamboo-node/issues/71</a></p>
          </blockquote>
          <p>Currently we do not allow variables and constants to be initialized after they are declared. This improves readability, as the reader of the code can always be sure the initial value can be found where the variable or constant was declared, not somewhere else in the code following the declaration.</p>
          <p>Should we allow the late initialization of variables and constants?</p>
          <p>Are there good examples for cases where late initialization would be useful or even essential?</p>
        </section>
        <section>
          <h3 id="arbitrary-argument-order-based-on-argument-labels"><a href="#arbitrary-argument-order-based-on-argument-labels" aria-hidden="true"><span class="icon icon-link"></span></a>Arbitrary Argument Order Based on Argument Labels</h3>
          <blockquote>
            <p>➡️ <a href="https://github.com/dapperlabs/bamboo-node/issues/76">https://github.com/dapperlabs/bamboo-node/issues/76</a></p>
          </blockquote>
          <p>Should arbitrary argument order be supported in function calls as long as the argument labels match?</p>
        </section>
      </section>
    </section>
  </body>
</html>
